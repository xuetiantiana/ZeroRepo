import{h as Qe,g as $e}from"./util-D_xHXW5K.js";import{d as Me,r as P,o as v,c as y,a,t as $,F,b as q,e as V,n as he,p as fe,f as ge,_ as me,g as Q,h as ee,i as de,j as W,w as Z,k as et,l as ue,u as ke,m as tt,q as ot,s as nt,v as st,x as lt}from"./index-zBpeerUP.js";import{i as at}from"./index-CVOXnaBf.js";const ve=r=>(fe("data-v-9b2498fe"),r=r(),ge(),r),it={key:0,class:"body"},rt={class:"info-item",style:{"padding-right":"15px"}},ct=ve(()=>a("span",{class:"info-label"},"Node:",-1)),dt={class:"info-value"},ut={class:"info-item"},ht=ve(()=>a("span",{class:"info-label"},"Feature_Path:",-1)),ft={class:"info-value"},gt={key:0,class:"info-file_pat_"},mt={class:"info-label"},vt={class:"info-value"},pt={key:0,style:{"margin-top":"0.5em"}},yt=["onClick"],xt={key:1},bt={key:2,style:{"margin-top":"0.5em"}},_t=ve(()=>a("b",{style:{"margin-top":"0.5em"}},"methods: ",-1)),Nt={key:0,class:"info-file_pat_"},St={class:"info-label"},Ct={class:"info-value"},$t={class:"info-label"},kt=["onClick"],wt=Me({__name:"nodeDetailComponent",props:{currNode:{type:Object,required:!0,default:()=>({})}},setup(r){const O=P(new Set),A=S=>{O.value.has(S)?O.value.delete(S):O.value.add(S)},d=S=>O.value.has(S);return(S,x)=>r.currNode&&r.currNode.metaData?(v(),y("div",it,[a("div",rt,[ct,a("span",dt,$(r.currNode.metaData.node),1)]),a("div",ut,[ht,a("span",ft,$(r.currNode.metaData.feature_path),1)]),(v(!0),y(F,null,q(r.currNode.metaData.file_paths,(E,b)=>(v(),y("div",{key:b,class:"info-item"},[(v(!0),y(F,null,q(E,(h,c,w)=>(v(),y(F,{key:w},[c!=="extra"?(v(),y("div",gt,[a("span",mt,$(c)+":",1),a("span",vt,$(h),1)])):V("",!0)],64))),128)),E.extra?(v(),y("div",pt,[(v(!0),y(F,null,q(E.extra,(h,c,w)=>(v(),y(F,{key:w},[c=="docstring"?(v(),y("div",{key:0,class:he(["info-docstring",{expanded:d("".concat(b,"-").concat(c))}])},[a("b",null,$(c)+": ",1),a("span",{class:"docstring-content",onClick:I=>A("".concat(b,"-").concat(c))},$(h),9,yt)],2)):c!=="methods"?(v(),y("p",xt,[a("b",null,$(c)+": ",1),a("span",null,$(h),1)])):c=="methods"?(v(),y("div",bt,[_t,(v(!0),y(F,null,q(h,(I,D)=>(v(),y("div",{key:D,style:{"margin-bottom":"0.5em"}},[(v(!0),y(F,null,q(I,(_,z,g)=>(v(),y(F,{key:g},[z!=="docstring"?(v(),y("div",Nt,[a("span",St,$(z)+":",1),a("span",Ct,$(_),1)])):z=="docstring"?(v(),y("div",{key:1,class:he(["info-docstring",{expanded:d("".concat(b,"-").concat(D,"-").concat(z))}])},[a("span",$t,$(z)+":",1),a("span",{class:"docstring-content",onClick:C=>A("".concat(b,"-").concat(D,"-").concat(z))},$(_),9,kt)],2)):V("",!0)],64))),128))]))),128))])):V("",!0)],64))),128))])):V("",!0)]))),128))])):V("",!0)}}),we=me(wt,[["__scopeId","data-v-9b2498fe"]]),Te=r=>(fe("data-v-e1e38bf0"),r=r(),ge(),r),Mt={class:"sidebar"},Tt=Te(()=>a("div",{class:"sidebar-header"},[a("h2",null,"ZeroRepo")],-1)),At={class:"sidebar-content"},Dt={class:"current-node-box",ref:"nodeModalRef"},It={class:"select-node-item",style:{}},Bt={class:"node-header"},Et={class:"node-title",style:{"margin-right":"12px"}},zt=Te(()=>a("span",null,"CurrNode:  ",-1)),Ot={class:"icon"},Ft={class:"node-body"},Pt={style:{display:"flex","flex-direction":"column",flex:"1",overflow:"hidden",padding:"1em 0.5em 0 1em",margin:"1em 0.5em","border-radius":"15px",background:"rgba(212, 212, 212, 0.1)"}},Rt={style:{}},Wt={style:{margin:"0 0 1em","padding-right":"7px","font-size":"18px"}},Lt={style:{"margin-right":"7px","margin-bottom":"6px"}},jt={class:"selected-nodes-box"},Vt=["onClick"],Gt=["onClick"],Ht=["onClick"],qt=Me({__name:"SelectedNodesPanel",props:{selectedNodeList:{type:Array,required:!0,default:[]},currNode:{type:Object,required:!0,default:()=>({})},maxSelectedNodes:{type:Number,required:!0,default:0}},emits:["removeSelectedNode","clearAllSelectedNodes","handleSelectedNodeClick","handleCurrNodePlusClick"],setup(r,{expose:O,emit:A}){const d=A,S=g=>{_.value.delete(g),d("removeSelectedNode",g)},x=()=>{_.value.clear(),d("clearAllSelectedNodes"),h.value=""},E=g=>{d("handleSelectedNodeClick",g)},b=g=>{d("handleCurrNodePlusClick",g)},h=P(""),c=P(null),w=P({});function I(g,C){g&&(w.value[C]=g)}const D=g=>{g!=null&&et(()=>{const C=w.value[g];C&&c.value&&C.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})})},_=P(new Set);function z(g){_.value.has(g)?_.value.delete(g):_.value.add(g)}return O({handleNodeSearch:D}),(g,C)=>{const G=Q("el-button"),ae=Q("el-option"),H=Q("el-select"),te=Q("el-icon");return v(),y("div",null,[a("div",Mt,[Tt,a("div",At,[a("div",Dt,[a("div",It,[a("div",Bt,[a("h3",Et,[zt,ee(" "+$(r.currNode&&typeof r.currNode=="object"&&Object.keys(r.currNode).length>0?r.currNode.hasAbbr?r.currNode.originalName+" ("+r.currNode.name+")":r.currNode.metaData.node:"None"),1)]),r.currNode&&typeof r.currNode=="object"&&Object.keys(r.currNode).length>0?(v(),y("div",{key:0,class:"plus-button",onClick:C[0]||(C[0]=p=>b(r.currNode))},[a("span",Ot,$(r.selectedNodeList.some(p=>p.idx===r.currNode.idx)?"-":"+"),1)])):V("",!0)]),a("div",Ft,[r.currNode&&r.currNode.metaData?(v(),de(we,{key:0,currNode:r.currNode},null,8,["currNode"])):V("",!0)])])],512),a("div",Pt,[a("div",Rt,[a("h4",Wt,[ee(" Added Nodes ("+$(r.selectedNodeList.length)+") ",1),W(G,{class:"clear-all-btn",size:"small",style:{float:"right"},onClick:x},{default:Z(()=>[ee("Clear All")]),_:1})]),a("div",Lt,[W(H,{modelValue:h.value,"onUpdate:modelValue":C[1]||(C[1]=p=>h.value=p),filterable:"",placeholder:"Type to search yours added nodes below...",clearable:"",style:{width:"100%"},onChange:D},{default:Z(()=>[(v(!0),y(F,null,q(r.selectedNodeList,(p,U)=>{var R;return v(),de(ae,{key:p.id,label:((R=p.metaData)==null?void 0:R.node)||p.label,value:U},null,8,["label","value"])}),128))]),_:1},8,["modelValue"])])]),a("div",jt,[a("div",{ref_key:"selectedNodesScrollContainer",ref:c,class:"selected-nodes-list"},[(v(!0),y(F,null,q(r.selectedNodeList,(p,U)=>(v(),y("div",{key:p.idx||U,ref_for:!0,ref:R=>I(R,U),class:"select-node-item"},[a("div",{class:"node-header",style:ue({"border-left":"4px solid ".concat(p.selectedColor)})},[a("h3",{onClick:R=>E(p.idx),class:"node-title",style:ue({color:p.selectedColor})},$(p.hasAbbr?p.originalName+" ("+p.name+")":p.metaData.node),13,Vt),a("button",{class:"close-btn",onClick:R=>S(p.idx)},[W(te,null,{default:Z(()=>[W(ke(tt))]),_:1})],8,Gt)],4),a("div",{class:he(["node-body",{expanded:_.value.has(p.idx)}])},[a("button",{class:"dropdown-btn",onClick:R=>z(p.idx),style:{position:"absolute",right:"2px",top:"0px","z-index":"2"}},[W(te,{style:ue({transform:_.value.has(p.idx)?"rotate(180deg)":"rotate(0deg)"})},{default:Z(()=>[W(ke(ot))]),_:2},1032,["style"])],8,Ht),p&&p.metaData?(v(),de(we,{key:0,currNode:p},null,8,["currNode"])):V("",!0)],2)]))),128))],512)])])])])])}}}),Ut=me(qt,[["__scopeId","data-v-e1e38bf0"]]),Ae=r=>(fe("data-v-207365d2"),r=r(),ge(),r),Xt={class:""},Yt={style:{height:"100vh"}},Zt={id:"viewport",style:{display:"flex"}},Jt={id:"wrapper",style:{flex:"1",overflow:"hidden",height:"100%"}},Kt=Ae(()=>a("div",{id:"echart",style:{width:"100%",height:"100%"}},null,-1)),Qt=Ae(()=>a("span",{class:"icon"},"+",-1)),eo=[Qt],to={class:"showAllNodes",style:{position:"absolute",right:"20px",top:"15px","z-index":"1000"}},oo={style:{position:"absolute",right:"150px",top:"15px","z-index":"1000"}},no={__name:"echart3",setup(r){const O=P();let A=null,d={nodes:[],links:[]},S=1,x=null,E=!1,b=null,h=null;const c=P([]),w=P(1e6),I=P();let D=0,_=0,z=[];nt(w,(t,o)=>{if(console.log("最大选择数量从 ".concat(o," 变更为 ").concat(t)),c.value.length>t){const e=c.value.slice(t);c.value=c.value.slice(0,t),console.log("由于限制变更，移除了以下节点:",e),alert("由于限制变更，已移除 ".concat(e.length," 个节点"))}});let g=1e3,C=1e3;st(()=>{g=document.getElementById("echart").getBoundingClientRect().width,C=document.getElementById("echart").getBoundingClientRect().height;const t=Math.min(g,C);S=Math.max(2500/t,1),h=document.getElementById("plusButton"),Xe(),console.log("屏幕尺寸：",g,C,2500/t,S);const o=document.getElementById("echart");o&&(x=at(o),Promise.all([fetch("./data/webui.json").then(e=>e.json()),fetch("./data/map.json").then(e=>e.json())]).then(([e,n])=>{console.log("webui:",e),console.log("map:",n),te(e.data_flow_graph),A=Qe(e,n),ye(1),d=oe(A),Fe(x)}).catch(e=>{console.error("请求失败:",e)}),lt(()=>{x.dispose()}))});const G=P(!1),ae=t=>{G.value=!G.value,t=G.value?5:1,ye(t),d=oe(A),x.setOption({series:[{data:d.nodes,links:d.links}]}),x.setOption({series:[{center:[0,0]}]})},H=[],te=t=>{t.forEach(o=>{const e=o.from,n=o.to;if(e&&n){const s={source:"1_"+e,target:"1_"+n,type:"rootLink",content:o,label:{show:!0,formatter:o.data_type||o.label||"",color:"#000",fontSize:9,position:"middle"},lineStyle:{color:"#000",width:1,type:"dashed",opacity:1},symbol:["circle","arrow"],symbolSize:[4,8]};H.push(s)}}),console.log(H)};function p(t){const o=[{name:"test1",x:t,y:t},{name:"test2",x:-t,y:-t},{name:"test3",x:-t,y:t},{name:"test4",x:t,y:-t}];return console.log("Dddd"),o.map(e=>({...e,id:e.name,itemStyle:{opacity:0},label:{show:!1}}))}const U=p(680),R=t=>({0:0,1:125,2:215,3:310,4:400,5:500})[t]||420+(t-6)*40,L=["#686759","#0068B8","#62BDE4","#52E0FC","#86DCF8","#BAD7F3"],De={"Advanced Modeling Techniques":"#FF8364",Algorithms:"#5414E9",Workflow:"#00C6A2","Data Engineering":"#0368FF"},pe=t=>{let o;return t==0?o=5:t==1?o=100/S:t==2?o=80/S:t==3?o=70/S:t==4?o=38/S:o=30/S,o},Ie=(t,o)=>{if(console.log("!!@@@@",o,I.value),t<=1)return{color:L[t%L.length],borderColor:L[t%L.length],borderWidth:.5,opacity:1};{let e=!1;return I.value&&I.value.idx==o.idx&&(e=!0),{color:e?"rgb(0, 120, 212)":L[t%L.length],borderColor:L[t%L.length],borderWidth:1}}},Be=(t,o)=>({color:t==1?"rgba(0,0,0,.1)":De[o.level1Root]||"rgba(0,0,0,.4)",width:1}),Ee=(t,o,e=0,n="",s=0,i)=>{if(o>=5){let f=e*180/Math.PI;const k=ze(0,0,(i==null?void 0:i.x)+0,(i==null?void 0:i.y)+0,100,n),l=pe(5);return{show:!0,position:[k.dx+l,k.dy+l],fontSize:10,color:"#333",fontWeight:"normal",align:"center",verticalAlign:"middle",rotate:f>90&&f<270?180-f:-f}}let u={};if(o==0)u={fontSize:12,color:"#333",fontWeight:"normal"};else{let f=!1;I.value&&I.value.idx==t.idx&&(f=!0),u={position:"inside",fontSize:o===1?12:11,color:o==1||f?"#fff":"#333",textBorderColor:"#000",textBorderWidth:f?2:0,textShadowColor:"rgba(0,0,0,0.5)",textShadowBlur:f?4:0,verticalAlign:"middle",align:"center",fontWeight:o===1?"bold":"normal",width:200}}return u};function ie(t,o=10,e="Arial"){const s=(ie._canvas||(ie._canvas=document.createElement("canvas"))).getContext("2d");return s.font="".concat(o,"px ").concat(e),s.measureText(t).width}const ze=(t,o,e,n,s=30,i)=>{i.length*3,s=ie(i)/2+25;const f=e-t,k=n-o,l=Math.atan2(k,f),N=l*(180/Math.PI),m=Math.cos(l)*s,B=Math.sin(l)*s;return{dx:m,dy:B,angleDeg:N}},oe=t=>{function o(l){if(!l||l.visible===!1)return null;const N={...l};return N.children&&Array.isArray(N.children)&&(N.children=N.children.map(o).filter(m=>!!m)),N}const e=o(t);console.log("开始转换为 Graph 数据格式 treeData",e),z=e;const n=[],s=[],i=new Map;function u(l,N=0){function m(M){let T=1;return M<=1?T=1:M==1?T=.75:M==2?T=.5:M==3?T=.3:M==4?T=.25:T=.08,T}if(!l.children||l.children.length===0)return m(N);const B=l.children.reduce((M,T)=>M+u(T,N+1),0),Y=m(N);return Math.max(B,Y)}function f(l,N=null,m=0,B=0,Y=2*Math.PI){if(!l||!l.name||l.visible===!1)return;const M=m<=1?m+"_"+(l.feature_path||l.name):m+"_"+(l.feature_path||l.name)+"_"+l.idx,T=R(m);let j,se=0,le=0;m===0?(se=0,le=0,j=0):(j=(B+Y)/2,se=Math.cos(j)*T,le=Math.sin(j)*T);const Ye={id:M,idx:l.idx,name:l.name||"Unknown",originalName:l.originalName?l.originalName:null,hasAbbr:l.hasAbbr,feature_path:l.feature_path||"",level:m,metaData:l.metaData,x:se,y:le,angle:j,sectorStart:B,sectorEnd:Y,fixed:!0,symbolSize:l.symbolSize||pe(m),label:Ee(l,m,j,l.name||"",T,{x:se,y:le}),itemStyle:l.itemStyle||Ie(m,l),category:m};if(m!=0&&n.push(Ye),i.set(l.name,M),N&&m>=2&&s.push({source:N,target:M,lineStyle:l.lineStyle||Be(m,l)}),l.children&&l.children.length>0){const Ne=l.children.map(K=>u(K,m+1)),Ze=Ne.reduce((K,ce)=>K+ce,0);let Se=Y-B;m===0&&(Se=2*Math.PI);let re=B;l.children.forEach((K,ce)=>{const Je=Ne[ce]/Ze*Se,Ke=re,Ce=re+Je;f(K,M,m+1,Ke,Ce),re=Ce})}}f(e,null,0,0,2*Math.PI),console.log("Graph 节点布局完成，节点数量:",n.length,n,s),$e(e)<=2?H.forEach(l=>{l.label.show=!0}):H.forEach(l=>{l.label.show=!1});let k=[...H,...s];return console.log("!!!linksResult",k),{nodes:[...U,...n],links:k}},ye=t=>{function o(e,n){e.visible=n<=t,e.children&&e.children.length>0&&e.children.forEach(s=>o(s,n+1))}A&&o(A,0)},Oe=t=>{function o(s,i){if(s.idx===i)return s;if(s.children)for(const u of s.children){const f=o(u,i);if(f)return f}return null}const e=o(A,t);let n=!1;if(e&&e.children){for(const s of e.children)if(s.visible===!1){n=!0;break}e.children.forEach(s=>{if(s.visible=!s.visible,!s.visible&&s.children){const i=u=>{u.visible=!1,u.children&&u.children.forEach(i)};i(s)}})}return n},Fe=t=>{if(!d||!d.nodes||d.nodes.length===0){console.error("Graph 数据不存在或为空:",d);return}console.log("初始化 Graph 图表，节点数量:",d.nodes.length);var o={tooltip:{trigger:"item",triggerOn:"mousemove",extraCssText:"max-width: 400px; white-space: normal;",formatter:function(e){if(e.dataType==="node"){const n=e.data;let s="<strong>Node: </strong>".concat(n.hasAbbr?n.originalName+" ("+n.name+")":n.name," <br/>");return n.feature_path&&(s+="<strong>Feature Path: </strong> ".concat(n.feature_path,"<br/>")),s}if(e.dataType==="edge"&&e.data&&e.data.type==="rootLink"){let n="<strong>Flow Graph:</strong><br/>";return n+="<strong>From: </strong> ".concat(e.data.content.from,"<br/>"),n+="<strong>To: </strong> ".concat(e.data.content.to,"<br/>"),e.data.label&&e.data.label.formatter&&(n+="<strong>Data Type: </strong> ".concat(e.data.content.data_type,"<br/>")),n}return e.dataType==="edge"?"":e.name||""}},series:[{type:"graph",layout:"none",roam:"move",zoom:S,center:[0,0],data:d.nodes,links:d.links,symbol:"circle",symbolSize:30,label:{show:!0,position:function(e){return e&&e.data&&e.data.level>=5?"right":"inside"},fontSize:function(e){return e&&e.data&&e.data.level>=5?10:12},formatter:function(e){var n=e.name||"";if(e&&e.data&&e.data.level>=3)return n;for(var s=n.split(" "),i=[],u=0;u<s.length;u++){var f=s[u];i.push(f)}return i.join("\n")}},lineStyle:{color:"source",curveness:0,width:1},animationDurationUpdate:750,animationEasingUpdate:"quinticInOut"}]};t.setOption(o),t.on("mouseover",function(e){if(e.componentType==="series"&&e.dataType==="node"&&e.data.level>1){const n=e.data.idx;if(clearTimeout(J),X===n)return;X=n,_e(e.data)}}),t.on("mouseout",function(e){if(e.componentType==="series"&&e.dataType==="node"&&e.data.level>1){const n=e.data.idx;if(X!==n)return;clearTimeout(J),J=setTimeout(()=>{X===n&&!Ge()&&(ne(),X=null)},200)}}),setTimeout(()=>{[,,,,D,_]=t.getModel().getSeriesByIndex(0).coordinateSystem.getRoamTransform(),console.log("初始偏移量:",{initialTranslateX:D,initialTranslateY:_})},100),t.on("graphRoam",function(){E=!0,ne(),setTimeout(()=>{E=!1,console.log("拖拽/缩放结束")},300),We()}),t.on("mousedown",function(){console.log("mousedown"),E=!0,ne()}),t.on("mouseup",function(){console.log("mouseup"),setTimeout(()=>{E=!1,console.log("鼠标操作结束")},100)}),t.on("click",function(e){if(e.dataType==="node"){console.log("params.data",e.data),e.data.level>1?I.value=e.data:I.value=null;const n=e.data.idx;Oe(n),d=oe(A),t.setOption({series:[{data:d.nodes,links:d.links}]}),Le(e.data)}})},xe=t=>{console.log(d.nodes);const o=d.nodes.find(e=>e.idx===t);if(console.log("!!!",t,o),o){const e=d.nodes.findIndex(n=>n.idx===t);d.nodes[e].emphasis={itemStyle:{color:"rgb(43, 124, 233)"},label:{fontWeight:"bold",color:"#000"}},x.setOption({series:[{center:[o.x,o.y],data:d.nodes}]}),x.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:e}),setTimeout(()=>{x.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:e}),delete d.nodes[e].emphasis,x.setOption({series:[{data:d.nodes}]})},2e3),console.log("聚焦到节点: ".concat(t))}else console.log("节点 ".concat(t," 不在当前视图中，开始逐层展开")),Pe(t)},Pe=t=>{let o=!1;const e=(s,i)=>{if(!s)return!1;if(s.idx===i)return s.visible=!0,!0;if(s.children&&s.children.length>0){for(const u of s.children)if(e(u,i))return s.visible=!0,s.children.forEach(f=>{f.visible=!0}),!0}return!1};(()=>{o||(o=e(A,t),o&&(d=oe(A),x.setOption({series:[{data:d.nodes,links:d.links}]}),xe(t)))})()},Re=t=>{console.log("22",t),xe(t)},We=()=>{let t=$e(z);console.log("depth",t);const e=x.getModel().getSeriesByIndex(0).coordinateSystem.getRoamTransform(),[,,,,n,s]=e,i=1500/5*(t-1),u=Math.min((i-g)/2+g,i),f=Math.min((i-C)/2+C,i);let k=n,l=s;console.log(g,C),Math.abs(n-D)>u&&(k=n>D?D+u:D-u),Math.abs(s-_)>f&&(l=s>_?_+f:_-f),console.log("&&",n,s),console.log("x移动了多少",Math.abs(n-D),"最多可拖拽",u),console.log("y移动了多少",Math.abs(s-_),"最多可拖拽",f),(k!==n||l!==s)&&(be(),console.log("aaa",k-n,l-s))},be=()=>{x.setOption({series:[{center:[0,0],data:d.nodes}]}),setTimeout(()=>{x.setOption({series:[{data:d.nodes}]})},150)};function Le(t){if(!x||!t)return;console.log("@@@",t);const o=x.convertToPixel({seriesIndex:0},[t.x,t.y]),e=x.getDom(),n=e.offsetWidth,s=e.offsetHeight,i=x.getModel().getSeriesByIndex(0).option.zoom,u=80*i,[f,k]=o;let l=!1;if((f<u||f>n-u||k<u||k>s-u)&&(l=!0),l){console.log("needMove");const{x:N,y:m}=t,B=Math.sqrt(N*N+m*m);if(B===0)return;const M=Math.max(0,B-200/i)/B,T=N*M,j=m*M;x.setOption({series:[{center:[T,j]}]})}}const je=t=>{c.value.some(e=>e.idx===t.idx)?c.value=c.value.filter(e=>e.idx!==t.idx):(c.value.unshift(t),O.value.handleNodeSearch(0))},Ve=()=>{if(!(b&&b.level<=1)&&b){const t=b.idx;if(c.value.some(e=>e.idx===t))console.log("点击减号，移除节点:",b),c.value=c.value.filter(e=>e.idx!==t);else{if(c.value.length>=w.value){alert("最多只能选择 ".concat(w.value," 个节点！"));return}console.log("点击加号，添加节点:",b),c.value.unshift(b),O.value.handleNodeSearch(0),console.log("!!!!",c)}console.log("当前选择的节点列表:",c.value),_e(b)}},_e=t=>{if(!(!h||E))try{const o=c.value.some(l=>l.idx===t.idx),e=x.convertToPixel("series",[t.x,t.y]),n=t.symbolSize||30;console.log(e);const i=x.getModel().getSeriesByIndex(0).coordinateSystem.getRoamTransform();let u=1;Array.isArray(i)&&i.length===6?u=i[0]:i&&typeof i.zoom=="number"&&(u=i.zoom);const f=n/2*u*Math.sin(Math.PI/4),k=-n/2*u*Math.sin(Math.PI/4);h.style.left=e[0]+f+"px",h.style.top=e[1]+k+"px",h.style.display="flex",o?(h.getElementsByClassName("icon")[0].textContent="−",h.style.backgroundColor="#f56c6c",h.title="点击取消选择"):c.value.length>=w.value?(h.getElementsByClassName("icon")[0].textContent="+",h.style.backgroundColor="#909399",h.title="已达到最大选择数量 (".concat(c.value.length,"/").concat(w.value,")")):(h.getElementsByClassName("icon")[0].textContent="+",h.style.backgroundColor="#409eff",h.title="点击选择节点 (".concat(c.value.length,"/").concat(w.value,")")),b=t}catch(o){console.error("显示按钮失败:",o)}},ne=()=>{clearTimeout(J),h&&(h.style.display="none"),b=null,X=null},Ge=()=>h?h.matches(":hover"):!1,He=t=>{c.value=c.value.filter(o=>o.idx!==t),console.log("移除节点:",t),console.log("当前选择的节点列表:",c.value)},qe=()=>{c.value=[]},Ue=t=>{w.value=t,console.log("从组件更新最大选择节点数量为:",t)},Xe=()=>{h&&(h.addEventListener("mouseenter",()=>{console.log("鼠标进入加号按钮"),clearTimeout(J)}),h.addEventListener("mouseleave",()=>{console.log("鼠标离开加号按钮"),ne()}))};let J=null,X=null;return(t,o)=>{const e=Q("el-button");return v(),y("div",Xt,[a("div",Yt,[a("div",Zt,[W(Ut,{ref_key:"selectedNodesPanelRef",ref:O,style:{width:"20%","min-width":"300px","max-width":"600px"},selectedNodeList:c.value,maxSelectedNodes:w.value,currNode:I.value,onRemoveSelectedNode:He,onClearAllSelectedNodes:qe,onUpdateMaxNodes:Ue,onHandleSelectedNodeClick:Re,onHandleCurrNodePlusClick:je},null,8,["selectedNodeList","maxSelectedNodes","currNode"]),a("div",Jt,[Kt,a("div",{id:"plusButton",class:"plus-button",style:{display:"none"},onClick:Ve},eo),a("div",to,[W(e,{style:{width:"120px"},color:"rgb(43, 124, 233)",type:"primary",onClick:o[0]||(o[0]=n=>ae(G.value))},{default:Z(()=>[ee($(G.value?"Close All Nodes":"Show All Nodes"),1)]),_:1})]),a("div",oo,[W(e,{class:"center-view-btn",style:{width:"120px"},color:"rgb(43, 124, 233)",onClick:be},{default:Z(()=>[ee(" Center View")]),_:1})])])])])])}}},io=me(no,[["__scopeId","data-v-207365d2"]]);export{io as default};
