!function(){function e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){d=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(d)throw a}}}}function t(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function r(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=d(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],d=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;d=!1}else for(;!(d=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);d=!0);}catch(e){c=!0,r=e}finally{try{if(!d&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}System.register(["./util-legacy-BQ9sUvNq.js","./index-legacy-DpnVRYxM.js","./index-legacy-Ds2O1RuX.js"],(function(n,r){"use strict";var i,l,c,s,u,f,p,v,b,h,g,m,y,x,w,k,N,S,C,_,j,A,z,O,T,I,M,E,P;return{setters:[function(e){i=e.h,l=e.g},function(e){c=e.d,s=e.r,u=e.o,f=e.c,p=e.a,v=e.t,b=e.F,h=e.b,g=e.e,m=e.n,y=e.p,x=e.f,w=e._,k=e.g,N=e.h,S=e.i,C=e.j,_=e.w,j=e.k,A=e.l,z=e.u,O=e.m,T=e.q,I=e.s,M=e.v,E=e.x},function(e){P=e.i}],execute:function(){var r=document.createElement("style");r.textContent='@charset "UTF-8";.body .show[data-v-9b2498fe]{z-index:1000;opacity:1;pointer-events:auto}.body .info-item[data-v-9b2498fe]{margin-bottom:8px;overflow-wrap:break-word;word-wrap:break-word}.body .info-item .info-label[data-v-9b2498fe]{font-weight:700}.body .info-item .info-value[data-v-9b2498fe]{margin-left:10px}.body .info-docstring .docstring-content[data-v-9b2498fe]{cursor:pointer;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;transition:all .3s ease}.body .info-docstring.expanded .docstring-content[data-v-9b2498fe]{display:block;-webkit-line-clamp:unset;overflow:visible}.sidebar[data-v-e1e38bf0]{font-size:14px;height:100%;width:100%;background:#fff;border-right:2px solid #dee2e6;overflow:hidden;padding:0;box-sizing:border-box;display:flex;flex-direction:column}.sidebar .sidebar-header[data-v-e1e38bf0]{display:flex;flex-direction:row;justify-content:space-between;padding:14px 30px}.sidebar .sidebar-header h2[data-v-e1e38bf0]{color:#fff;font-family:Segoe UI;font-weight:900;font-style:Italic;font-size:24px;line-height:32px;-webkit-text-stroke:2px #0f6cbd;text-stroke:2px #0f6cbd}.sidebar .sidebar-content[data-v-e1e38bf0]{flex:1;overflow:hidden;display:flex;flex-direction:column}.sidebar .sidebar-content .current-node-box[data-v-e1e38bf0]{padding:1em .5em 2em;margin:0 .5em;border-bottom:1px solid rgb(97,97,97)}.sidebar .sidebar-content .current-node-box .select-node-item[data-v-e1e38bf0]{background:#0078d4;color:#fff;border-radius:15px}.sidebar .sidebar-content .current-node-box .select-node-item .node-header h3[data-v-e1e38bf0]:after{opacity:0}.sidebar .sidebar-content .current-node-box .select-node-item .node-header h3[data-v-e1e38bf0]{font-size:18px}.sidebar .sidebar-content .current-node-box .select-node-item .node-body[data-v-e1e38bf0]{min-height:100px;max-height:150px;overflow:auto}.sidebar .sidebar-content .selected-nodes-box[data-v-e1e38bf0]{padding:1em 0;flex:1;overflow:hidden}.sidebar .sidebar-content .selected-nodes-box>div[data-v-e1e38bf0]{height:100%;padding-right:.5em;overflow-y:auto}.select-node-item[data-v-e1e38bf0]{width:100%;background:#fff;border-top:3px solid rgb(16,110,190);transition:opacity .3s ease-in-out;margin-top:.5em;padding-bottom:1em}.select-node-item[data-v-e1e38bf0]:nth-child(1){margin-top:0}.select-node-item .show[data-v-e1e38bf0]{z-index:1000;opacity:1;pointer-events:auto}.select-node-item .node-header[data-v-e1e38bf0]{padding:15px;border-radius:6px 6px 0 0;position:relative}.select-node-item .node-header h3[data-v-e1e38bf0]{cursor:pointer;position:relative}.select-node-item .node-header h3[data-v-e1e38bf0]:after{content:" ";display:inline-block;width:3px;height:1.6em;position:absolute;left:-10px;top:-2px;background:#463668}.select-node-item .node-title[data-v-e1e38bf0]{margin:0;font-weight:700;font-size:16px;padding-right:1em}.select-node-item .close-btn[data-v-e1e38bf0]{position:absolute;right:-2px;top:14px;background:none;border:none;font-size:18px;cursor:pointer;color:#666;width:28px;height:28px;border-radius:15px}.select-node-item .close-btn[data-v-e1e38bf0]:hover{opacity:.8}.select-node-item .node-body[data-v-e1e38bf0]{padding:0 15px;overflow:hidden}.clear-all-btn[data-v-e1e38bf0]{background:#fff;color:#2b7ce9;border:1px solid rgb(43,124,233);height:30px;font-size:14px;border-radius:8px}.clear-all-btn[data-v-e1e38bf0]:hover{opacity:.8}[data-v-e1e38bf0] .el-radio-group{border-radius:20px;padding:3px 4px;background:#ccc;gap:5px;--el-font-size-base: 18px}[data-v-e1e38bf0] .el-radio-group .el-radio-button__inner{border:0!important;border-radius:20px!important;color:#fff;background:transparent}[data-v-e1e38bf0] .el-radio-group .is-active .el-radio-button__inner{background:#000!important;color:#fff!important;box-shadow:inset 0 0 0 1px #000!important}[data-v-e1e38bf0] .el-select{--el-fill-color-blank: rgba(230, 230, 230, 1);--el-border-radius-base: 12px;--el-input-text-color: rgba(66, 66, 66, 1)}[data-v-e1e38bf0] .el-select .el-select__wrapper{height:36px;border:none;outline:none;box-shadow:none}.plus-button[data-v-e1e38bf0]{position:absolute;width:20px;height:20px;top:25px;right:0;border:2px solid #fff;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:700;cursor:pointer;z-index:1000;box-shadow:0 2px 8px rgba(0,0,0,.3);transition:all .2s ease;user-select:none;transform:translate(-50%,-50%)}.plus-button span[data-v-e1e38bf0]{line-height:1;transform:translateY(-1px)}.plus-button[data-v-e1e38bf0]:hover{box-shadow:0 4px 12px rgba(0,0,0,.4)}.plus-button:hover[style*="background-color: rgb(64, 158, 255)"][data-v-e1e38bf0]{background-color:#66b1ff!important}.plus-button:hover[style*="background-color: rgb(245, 108, 108)"][data-v-e1e38bf0]{background-color:#f78989!important}.plus-button:hover[style*="background-color: rgb(144, 147, 153)"][data-v-e1e38bf0]{background-color:#a6a9ad!important}.node-body[data-v-e1e38bf0]{min-height:100px;max-height:120px;overflow-y:hidden;position:relative;transition:max-height .3s}.node-body.expanded[data-v-e1e38bf0]{max-height:none;overflow-y:visible}.dropdown-btn[data-v-e1e38bf0]{background:#eee;border:none;border-radius:4px;padding:2px 5px;cursor:pointer;font-size:12px}.header h3[data-v-207365d2]{margin:10px 0;text-align:center}.control-panel[data-v-207365d2]{display:flex;align-items:center;gap:20px;padding:10px 20px;background:#f8f9fa;border-radius:8px;margin:0 20px 10px;border:1px solid #e9ecef}.control-item[data-v-207365d2]{display:flex;align-items:center;gap:8px}.control-item label[data-v-207365d2]{font-size:14px;color:#333;font-weight:500}.max-nodes-input[data-v-207365d2]{width:60px;padding:4px 8px;border:1px solid #ddd;border-radius:4px;font-size:14px;text-align:center}.max-nodes-input[data-v-207365d2]:focus{outline:none;border-color:#409eff;box-shadow:0 0 0 2px rgba(64,158,255,.2)}.selection-status[data-v-207365d2]{font-size:14px;color:#666}.status-full[data-v-207365d2]{color:#f56c6c;font-weight:500}#viewport[data-v-207365d2]{width:100vw;height:100vh;overflow:hidden;position:relative}#wrapper[data-v-207365d2],#echart[data-v-207365d2]{width:100%;height:100%}.plus-button[data-v-207365d2]{position:absolute;width:20px;height:20px;background-color:#409eff;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:15px;font-weight:700;cursor:pointer;z-index:1000;box-shadow:0 2px 8px rgba(0,0,0,.3);transition:all .2s ease;user-select:none;transform:translate(-50%,-50%)}.plus-button span[data-v-207365d2]{line-height:1;transform:translateY(-1px)}.plus-button[data-v-207365d2]:hover{box-shadow:0 4px 12px rgba(0,0,0,.4)}.plus-button:hover[style*="background-color: rgb(64, 158, 255)"][data-v-207365d2]{background-color:#66b1ff!important}.plus-button:hover[style*="background-color: rgb(245, 108, 108)"][data-v-207365d2]{background-color:#f78989!important}.plus-button:hover[style*="background-color: rgb(144, 147, 153)"][data-v-207365d2]{background-color:#a6a9ad!important}#wrapper[data-v-207365d2]{position:relative}.center-view-btn[data-v-207365d2]{background:#fff;color:#2b7ce9;border:1px solid rgb(43,124,233)}.center-view-btn[data-v-207365d2]:hover{opacity:.8}\n',document.head.appendChild(r);var D=function(e){return y("data-v-9b2498fe"),e=e(),x(),e},B={key:0,class:"body"},F={class:"info-item",style:{"padding-right":"15px"}},R=D((function(){return p("span",{class:"info-label"},"Node:",-1)})),L={class:"info-value"},W={class:"info-item"},q=D((function(){return p("span",{class:"info-label"},"Feature_Path:",-1)})),U={class:"info-value"},G={key:0,class:"info-file_pat_"},V={class:"info-label"},H={class:"info-value"},Y={key:0,style:{"margin-top":"0.5em"}},X=["onClick"],Z={key:1},$={key:2,style:{"margin-top":"0.5em"}},J=D((function(){return p("b",{style:{"margin-top":"0.5em"}},"methods: ",-1)})),K={key:0,class:"info-file_pat_"},Q={class:"info-label"},ee={class:"info-value"},te={class:"info-label"},ne=["onClick"],oe=w(c({__name:"nodeDetailComponent",props:{currNode:{type:Object,required:!0,default:function(){return{}}}},setup:function(e){var t=s(new Set),n=function(e){t.value.has(e)?t.value.delete(e):t.value.add(e)},o=function(e){return t.value.has(e)};return function(t,r){return e.currNode&&e.currNode.metaData?(u(),f("div",B,[p("div",F,[R,p("span",L,v(e.currNode.metaData.node),1)]),p("div",W,[q,p("span",U,v(e.currNode.metaData.feature_path),1)]),(u(!0),f(b,null,h(e.currNode.metaData.file_paths,(function(e,t){return u(),f("div",{key:t,class:"info-item"},[(u(!0),f(b,null,h(e,(function(e,t,n){return u(),f(b,{key:n},["extra"!==t?(u(),f("div",G,[p("span",V,v(t)+":",1),p("span",H,v(e),1)])):g("",!0)],64)})),128)),e.extra?(u(),f("div",Y,[(u(!0),f(b,null,h(e.extra,(function(e,r,a){return u(),f(b,{key:a},["docstring"==r?(u(),f("div",{key:0,class:m(["info-docstring",{expanded:o("".concat(t,"-").concat(r))}])},[p("b",null,v(r)+": ",1),p("span",{class:"docstring-content",onClick:function(e){return n("".concat(t,"-").concat(r))}},v(e),9,X)],2)):"methods"!==r?(u(),f("p",Z,[p("b",null,v(r)+": ",1),p("span",null,v(e),1)])):"methods"==r?(u(),f("div",$,[J,(u(!0),f(b,null,h(e,(function(e,r){return u(),f("div",{key:r,style:{"margin-bottom":"0.5em"}},[(u(!0),f(b,null,h(e,(function(e,a,i){return u(),f(b,{key:i},["docstring"!==a?(u(),f("div",K,[p("span",Q,v(a)+":",1),p("span",ee,v(e),1)])):"docstring"==a?(u(),f("div",{key:1,class:m(["info-docstring",{expanded:o("".concat(t,"-").concat(r,"-").concat(a))}])},[p("span",te,v(a)+":",1),p("span",{class:"docstring-content",onClick:function(e){return n("".concat(t,"-").concat(r,"-").concat(a))}},v(e),9,ne)],2)):g("",!0)],64)})),128))])})),128))])):g("",!0)],64)})),128))])):g("",!0)])})),128))])):g("",!0)}}}),[["__scopeId","data-v-9b2498fe"]]),re=function(e){return y("data-v-e1e38bf0"),e=e(),x(),e},ae={class:"sidebar"},ie=re((function(){return p("div",{class:"sidebar-header"},[p("h2",null,"ZeroRepo")],-1)})),le={class:"sidebar-content"},de={class:"current-node-box",ref:"nodeModalRef"},ce={class:"select-node-item",style:{}},se={class:"node-header"},ue={class:"node-title",style:{"margin-right":"12px"}},fe=re((function(){return p("span",null,"CurrNode:  ",-1)})),pe={class:"icon"},ve={class:"node-body"},be={style:{display:"flex","flex-direction":"column",flex:"1",overflow:"hidden",padding:"1em 0.5em 0 1em",margin:"1em 0.5em","border-radius":"15px",background:"rgba(212, 212, 212, 0.1)"}},he={style:{}},ge={style:{margin:"0 0 1em","padding-right":"7px","font-size":"18px"}},me={style:{"margin-right":"7px","margin-bottom":"6px"}},ye={class:"selected-nodes-box"},xe=["onClick"],we=["onClick"],ke=["onClick"],Ne=w(c({__name:"SelectedNodesPanel",props:{selectedNodeList:{type:Array,required:!0,default:[]},currNode:{type:Object,required:!0,default:function(){return{}}},maxSelectedNodes:{type:Number,required:!0,default:0}},emits:["removeSelectedNode","clearAllSelectedNodes","handleSelectedNodeClick","handleCurrNodePlusClick"],setup:function(e,t){var n=t.expose,o=t.emit,r=function(){y.value.clear(),o("clearAllSelectedNodes"),a.value=""},a=s(""),i=s(null),l=s({});var c=function(e){null!=e&&j((function(){var t=l.value[e];t&&i.value&&t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}))},y=s(new Set);return n({handleNodeSearch:c}),function(t,n){var s=k("el-button"),x=k("el-option"),w=k("el-select"),j=k("el-icon");return u(),f("div",null,[p("div",ae,[ie,p("div",le,[p("div",de,[p("div",ce,[p("div",se,[p("h3",ue,[fe,N(" "+v(e.currNode&&"object"===d(e.currNode)&&Object.keys(e.currNode).length>0?e.currNode.hasAbbr?e.currNode.originalName+" ("+e.currNode.name+")":e.currNode.metaData.node:"None"),1)]),e.currNode&&"object"===d(e.currNode)&&Object.keys(e.currNode).length>0?(u(),f("div",{key:0,class:"plus-button",onClick:n[0]||(n[0]=function(t){return n=e.currNode,void o("handleCurrNodePlusClick",n);var n})},[p("span",pe,v(e.selectedNodeList.some((function(t){return t.idx===e.currNode.idx}))?"-":"+"),1)])):g("",!0)]),p("div",ve,[e.currNode&&e.currNode.metaData?(u(),S(oe,{key:0,currNode:e.currNode},null,8,["currNode"])):g("",!0)])])],512),p("div",be,[p("div",he,[p("h4",ge,[N(" Added Nodes ("+v(e.selectedNodeList.length)+") ",1),C(s,{class:"clear-all-btn",size:"small",style:{float:"right"},onClick:r},{default:_((function(){return[N("Clear All")]})),_:1})]),p("div",me,[C(w,{modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=function(e){return a.value=e}),filterable:"",placeholder:"Type to search yours added nodes below...",clearable:"",style:{width:"100%"},onChange:c},{default:_((function(){return[(u(!0),f(b,null,h(e.selectedNodeList,(function(e,t){var n;return u(),S(x,{key:e.id,label:(null===(n=e.metaData)||void 0===n?void 0:n.node)||e.label,value:t},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])])]),p("div",ye,[p("div",{ref_key:"selectedNodesScrollContainer",ref:i,class:"selected-nodes-list"},[(u(!0),f(b,null,h(e.selectedNodeList,(function(e,t){return u(),f("div",{key:e.idx||t,ref_for:!0,ref:function(e){return function(e,t){e&&(l.value[t]=e)}(e,t)},class:"select-node-item"},[p("div",{class:"node-header",style:A({"border-left":"4px solid ".concat(e.selectedColor)})},[p("h3",{onClick:function(t){return n=e.idx,void o("handleSelectedNodeClick",n);var n},class:"node-title",style:A({color:e.selectedColor})},v(e.hasAbbr?e.originalName+" ("+e.name+")":e.metaData.node),13,xe),p("button",{class:"close-btn",onClick:function(t){return n=e.idx,y.value.delete(n),void o("removeSelectedNode",n);var n}},[C(j,null,{default:_((function(){return[C(z(O))]})),_:1})],8,we)],4),p("div",{class:m(["node-body",{expanded:y.value.has(e.idx)}])},[p("button",{class:"dropdown-btn",onClick:function(t){return n=e.idx,void(y.value.has(n)?y.value.delete(n):y.value.add(n));var n},style:{position:"absolute",right:"2px",top:"0px","z-index":"2"}},[C(j,{style:A({transform:y.value.has(e.idx)?"rotate(180deg)":"rotate(0deg)"})},{default:_((function(){return[C(z(T))]})),_:2},1032,["style"])],8,ke),e&&e.metaData?(u(),S(oe,{key:0,currNode:e},null,8,["currNode"])):g("",!0)],2)])})),128))],512)])])])])])}}}),[["__scopeId","data-v-e1e38bf0"]]),Se=function(e){return y("data-v-207365d2"),e=e(),x(),e},Ce={class:""},_e={style:{height:"100vh"}},je={id:"viewport",style:{display:"flex"}},Ae={id:"wrapper",style:{flex:"1",overflow:"hidden",height:"100%"}},ze=Se((function(){return p("div",{id:"echart",style:{width:"100%",height:"100%"}},null,-1)})),Oe=[Se((function(){return p("span",{class:"icon"},"+",-1)}))],Te={class:"showAllNodes",style:{position:"absolute",right:"20px",top:"15px","z-index":"1000"}},Ie={style:{position:"absolute",right:"150px",top:"15px","z-index":"1000"}},Me={__name:"echart3",setup:function(n){var r=s(),d=null,c={nodes:[],links:[]},b=1,h=null,g=!1,m=null,y=null,x=s([]),w=s(1e6),S=s(),j=0,A=0,z=[];I(w,(function(e,t){if(console.log("最大选择数量从 ".concat(t," 变更为 ").concat(e)),x.value.length>e){var n=x.value.slice(e);x.value=x.value.slice(0,e),console.log("由于限制变更，移除了以下节点:",n),alert("由于限制变更，已移除 ".concat(n.length," 个节点"))}}));var O=1e3,T=1e3;M((function(){O=document.getElementById("echart").getBoundingClientRect().width,T=document.getElementById("echart").getBoundingClientRect().height;var e=Math.min(O,T);b=Math.max(2500/e,1),y=document.getElementById("plusButton"),pe(),console.log("屏幕尺寸：",O,T,2500/e,b);var t=document.getElementById("echart");t&&(h=P(t),Promise.all([fetch("./data/webui.json").then((function(e){return e.json()})),fetch("./data/map.json").then((function(e){return e.json()}))]).then((function(e){var t=a(e,2),n=t[0],o=t[1];console.log("webui:",n),console.log("map:",o),F(n.data_flow_graph);var r=i(n,o);d=r,J(1),c=$(d),K(h)})).catch((function(e){console.error("请求失败:",e)})),E((function(){h.dispose()})))}));var D=s(!1),B=[],F=function(e){e.forEach((function(e){var t=e.from,n=e.to;if(t&&n){var o={source:"1_"+t,target:"1_"+n,type:"rootLink",content:e,label:{show:!0,formatter:e.data_type||e.label||"",color:"#000",fontSize:9,position:"middle"},lineStyle:{color:"#000",width:1,type:"dashed",opacity:1},symbol:["circle","arrow"],symbolSize:[4,8]};B.push(o)}})),console.log(B)};var R,L,W=(L=[{name:"test1",x:R=680,y:R},{name:"test2",x:-R,y:-R},{name:"test3",x:-R,y:R},{name:"test4",x:R,y:-R}],console.log("Dddd"),L.map((function(e){return o(o({},e),{},{id:e.name,itemStyle:{opacity:0},label:{show:!1}})}))),q=["#686759","#0068B8","#62BDE4","#52E0FC","#86DCF8","#BAD7F3"],U={"Advanced Modeling Techniques":"#FF8364",Algorithms:"#5414E9",Workflow:"#00C6A2","Data Engineering":"#0368FF"},G=function(e){return 0==e?5:1==e?100/b:2==e?80/b:3==e?70/b:4==e?38/b:30/b},V=function(e,t){if(console.log("!!@@@@",t,S.value),e<=1)return{color:q[e%q.length],borderColor:q[e%q.length],borderWidth:.5,opacity:1};var n=!1;return S.value&&S.value.idx==t.idx&&(n=!0),{color:n?"rgb(0, 120, 212)":q[e%q.length],borderColor:q[e%q.length],borderWidth:1}},H=function(e,t){return{color:1==e?"rgba(0,0,0,.1)":U[t.level1Root]||"rgba(0,0,0,.4)",width:1}},Y=function(e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>5?arguments[5]:void 0;if(t>=5){var r=180*(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)/Math.PI,a=Z(0,0,(null==o?void 0:o.x)+0,(null==o?void 0:o.y)+0,100,n),i=G(5);return{show:!0,position:[a.dx+i,a.dy+i],fontSize:10,color:"#333",fontWeight:"normal",align:"center",verticalAlign:"middle",rotate:r>90&&r<270?180-r:-r}}var l={};if(0==t)l={fontSize:12,color:"#333",fontWeight:"normal"};else{var d=!1;S.value&&S.value.idx==e.idx&&(d=!0),l={position:"inside",fontSize:1===t?12:11,color:1==t||d?"#fff":"#333",textBorderColor:"#000",textBorderWidth:d?2:0,textShadowColor:"rgba(0,0,0,0.5)",textShadowBlur:d?4:0,verticalAlign:"middle",align:"center",fontWeight:1===t?"bold":"normal",width:200}}return l};function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Arial",o=(X._canvas||(X._canvas=document.createElement("canvas"))).getContext("2d");return o.font="".concat(t,"px ").concat(n),o.measureText(e).width}var Z=function(e,t,n,o){var r,a=arguments.length>5?arguments[5]:void 0;a.length,r=X(a)/2+25;var i=n-e,l=o-t,d=Math.atan2(l,i),c=d*(180/Math.PI);return{dx:Math.cos(d)*r,dy:Math.sin(d)*r,angleDeg:c}},$=function(e){var n=function e(t){if(!t||!1===t.visible)return null;var n=o({},t);return n.children&&Array.isArray(n.children)&&(n.children=n.children.map(e).filter((function(e){return!!e}))),n}(e);console.log("开始转换为 Graph 数据格式 treeData",n),z=n;var r=[],a=[],i=new Map;function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;function n(e){return e<=1?1:1==e?.75:2==e?.5:3==e?.3:4==e?.25:.08}if(!e.children||0===e.children.length)return n(t);var o=e.children.reduce((function(e,n){return e+d(n,t+1)}),0),r=n(t);return Math.max(o,r)}!function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;if(t&&t.name&&!1!==t.visible){var s,u=o<=1?o+"_"+(t.feature_path||t.name):o+"_"+(t.feature_path||t.name)+"_"+t.idx,f=function(e){return{0:0,1:125,2:215,3:310,4:400,5:500}[e]||420+40*(e-6)}(o),p=0,v=0;0===o?(p=0,v=0,s=0):(s=(l+c)/2,p=Math.cos(s)*f,v=Math.sin(s)*f);var b={id:u,idx:t.idx,name:t.name||"Unknown",originalName:t.originalName?t.originalName:null,hasAbbr:t.hasAbbr,feature_path:t.feature_path||"",level:o,metaData:t.metaData,x:p,y:v,angle:s,sectorStart:l,sectorEnd:c,fixed:!0,symbolSize:t.symbolSize||G(o),label:Y(t,o,s,t.name||"",f,{x:p,y:v}),itemStyle:t.itemStyle||V(o,t),category:o};if(0!=o&&r.push(b),i.set(t.name,u),n&&o>=2&&a.push({source:n,target:u,lineStyle:t.lineStyle||H(o,t)}),t.children&&t.children.length>0){var h=t.children.map((function(e){return d(e,o+1)})),g=h.reduce((function(e,t){return e+t}),0),m=c-l;0===o&&(m=2*Math.PI);var y=l;t.children.forEach((function(t,n){var r=h[n]/g*m,a=y+r;e(t,u,o+1,y,a),y=a}))}}}(n,null,0,0,2*Math.PI),console.log("Graph 节点布局完成，节点数量:",r.length,r,a),l(n)<=2?B.forEach((function(e){e.label.show=!0})):B.forEach((function(e){e.label.show=!1}));var c=[].concat(B,a);return console.log("!!!linksResult",c),{nodes:[].concat(t(W),r),links:c}},J=function(e){d&&function t(n,o){n.visible=o<=e,n.children&&n.children.length>0&&n.children.forEach((function(e){return t(e,o+1)}))}(d,0)},K=function(t){if(c&&c.nodes&&0!==c.nodes.length){console.log("初始化 Graph 图表，节点数量:",c.nodes.length);var n={tooltip:{trigger:"item",triggerOn:"mousemove",extraCssText:"max-width: 400px; white-space: normal;",formatter:function(e){if("node"===e.dataType){var t=e.data,n="<strong>Node: </strong>".concat(t.hasAbbr?t.originalName+" ("+t.name+")":t.name," <br/>");return t.feature_path&&(n+="<strong>Feature Path: </strong> ".concat(t.feature_path,"<br/>")),n}if("edge"===e.dataType&&e.data&&"rootLink"===e.data.type){var o="<strong>Flow Graph:</strong><br/>";return o+="<strong>From: </strong> ".concat(e.data.content.from,"<br/>"),o+="<strong>To: </strong> ".concat(e.data.content.to,"<br/>"),e.data.label&&e.data.label.formatter&&(o+="<strong>Data Type: </strong> ".concat(e.data.content.data_type,"<br/>")),o}return"edge"===e.dataType?"":e.name||""}},series:[{type:"graph",layout:"none",roam:"move",zoom:b,center:[0,0],data:c.nodes,links:c.links,symbol:"circle",symbolSize:30,label:{show:!0,position:function(e){return e&&e.data&&e.data.level>=5?"right":"inside"},fontSize:function(e){return e&&e.data&&e.data.level>=5?10:12},formatter:function(e){var t=e.name||"";if(e&&e.data&&e.data.level>=3)return t;for(var n=t.split(" "),o=[],r=0;r<n.length;r++){var a=n[r];o.push(a)}return o.join("\n")}},lineStyle:{color:"source",curveness:0,width:1},animationDurationUpdate:750,animationEasingUpdate:"quinticInOut"}]};t.setOption(n),t.on("mouseover",(function(e){if("series"===e.componentType&&"node"===e.dataType&&e.data.level>1){var t=e.data.idx;if(clearTimeout(ve),be===t)return;be=t,le(e.data)}})),t.on("mouseout",(function(e){if("series"===e.componentType&&"node"===e.dataType&&e.data.level>1){var t=e.data.idx;if(be!==t)return;clearTimeout(ve),ve=setTimeout((function(){be!==t||ce()||(de(),be=null)}),200)}})),setTimeout((function(){var e=a(t.getModel().getSeriesByIndex(0).coordinateSystem.getRoamTransform(),6);j=e[4],A=e[5],console.log("初始偏移量:",{initialTranslateX:j,initialTranslateY:A})}),100),t.on("graphRoam",(function(){g=!0,de(),setTimeout((function(){g=!1,console.log("拖拽/缩放结束")}),300),ne()})),t.on("mousedown",(function(){console.log("mousedown"),g=!0,de()})),t.on("mouseup",(function(){console.log("mouseup"),setTimeout((function(){g=!1,console.log("鼠标操作结束")}),100)})),t.on("click",(function(n){"node"===n.dataType&&(console.log("params.data",n.data),n.data.level>1?S.value=n.data:S.value=null,function(t){var n=function t(n,o){if(n.idx===o)return n;if(n.children){var r,a=e(n.children);try{for(a.s();!(r=a.n()).done;){var i=t(r.value,o);if(i)return i}}catch(l){a.e(l)}finally{a.f()}}return null}(d,t),o=!1;if(n&&n.children){var r,a=e(n.children);try{for(a.s();!(r=a.n()).done;)if(!1===r.value.visible){o=!0;break}}catch(i){a.e(i)}finally{a.f()}n.children.forEach((function(e){if(e.visible=!e.visible,!e.visible&&e.children){var t=function(e){e.visible=!1,e.children&&e.children.forEach(t)};t(e)}}))}}(n.data.idx),c=$(d),t.setOption({series:[{data:c.nodes,links:c.links}]}),re(n.data))}))}else console.error("Graph 数据不存在或为空:",c)},Q=function(e){console.log(c.nodes);var t=c.nodes.find((function(t){return t.idx===e}));if(console.log("!!!",e,t),t){var n=c.nodes.findIndex((function(t){return t.idx===e}));c.nodes[n].emphasis={itemStyle:{color:"rgb(43, 124, 233)"},label:{fontWeight:"bold",color:"#000"}},h.setOption({series:[{center:[t.x,t.y],data:c.nodes}]}),h.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:n}),setTimeout((function(){h.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:n}),delete c.nodes[n].emphasis,h.setOption({series:[{data:c.nodes}]})}),2e3),console.log("聚焦到节点: ".concat(e))}else console.log("节点 ".concat(e," 不在当前视图中，开始逐层展开")),ee(e)},ee=function(t){var n=!1,o=function(t,n){if(!t)return!1;if(t.idx===n)return t.visible=!0,!0;if(t.children&&t.children.length>0){var r,a=e(t.children);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(o(i,n))return t.visible=!0,t.children.forEach((function(e){e.visible=!0})),!0}}catch(l){a.e(l)}finally{a.f()}}return!1};n||(n=o(d,t))&&(c=$(d),h.setOption({series:[{data:c.nodes,links:c.links}]}),Q(t))},te=function(e){console.log("22",e),Q(e)},ne=function(){var e=l(z);console.log("depth",e);var t=a(h.getModel().getSeriesByIndex(0).coordinateSystem.getRoamTransform(),6),n=t[4],o=t[5],r=300*(e-1),i=Math.min((r-O)/2+O,r),d=Math.min((r-T)/2+T,r),c=n,s=o;console.log(O,T),Math.abs(n-j)>i&&(c=n>j?j+i:j-i),Math.abs(o-A)>d&&(s=o>A?A+d:A-d),console.log("&&",n,o),console.log("x移动了多少",Math.abs(n-j),"最多可拖拽",i),console.log("y移动了多少",Math.abs(o-A),"最多可拖拽",d),c===n&&s===o||(oe(),console.log("aaa",c-n,s-o))},oe=function(){h.setOption({series:[{center:[0,0],data:c.nodes}]}),setTimeout((function(){h.setOption({series:[{data:c.nodes}]})}),150)};function re(e){if(h&&e){console.log("@@@",e);var t=h.convertToPixel({seriesIndex:0},[e.x,e.y]),n=h.getDom(),o=n.offsetWidth,r=n.offsetHeight,i=h.getModel().getSeriesByIndex(0).option.zoom,l=80*i,d=a(t,2),c=d[0],s=d[1],u=!1;if((c<l||c>o-l||s<l||s>r-l)&&(u=!0),u){console.log("needMove");var f=e.x,p=e.y,v=Math.sqrt(f*f+p*p);if(0===v)return;var b=Math.max(0,v-200/i)/v,g=f*b,m=p*b;h.setOption({series:[{center:[g,m]}]})}}}var ae=function(e){x.value.some((function(t){return t.idx===e.idx}))?x.value=x.value.filter((function(t){return t.idx!==e.idx})):(x.value.unshift(e),r.value.handleNodeSearch(0))},ie=function(){if(!(m&&m.level<=1)&&m){var e=m.idx;if(x.value.some((function(t){return t.idx===e})))console.log("点击减号，移除节点:",m),x.value=x.value.filter((function(t){return t.idx!==e}));else{if(x.value.length>=w.value)return void alert("最多只能选择 ".concat(w.value," 个节点！"));console.log("点击加号，添加节点:",m),x.value.unshift(m),r.value.handleNodeSearch(0),console.log("!!!!",x)}console.log("当前选择的节点列表:",x.value),le(m)}},le=function(e){if(y&&!g)try{var t=x.value.some((function(t){return t.idx===e.idx})),n=h.convertToPixel("series",[e.x,e.y]),o=e.symbolSize||30;console.log(n);var r=h.getModel().getSeriesByIndex(0).coordinateSystem.getRoamTransform(),a=1;Array.isArray(r)&&6===r.length?a=r[0]:r&&"number"==typeof r.zoom&&(a=r.zoom);var i=o/2*a*Math.sin(Math.PI/4),l=-o/2*a*Math.sin(Math.PI/4);y.style.left=n[0]+i+"px",y.style.top=n[1]+l+"px",y.style.display="flex",t?(y.getElementsByClassName("icon")[0].textContent="−",y.style.backgroundColor="#f56c6c",y.title="点击取消选择"):x.value.length>=w.value?(y.getElementsByClassName("icon")[0].textContent="+",y.style.backgroundColor="#909399",y.title="已达到最大选择数量 (".concat(x.value.length,"/").concat(w.value,")")):(y.getElementsByClassName("icon")[0].textContent="+",y.style.backgroundColor="#409eff",y.title="点击选择节点 (".concat(x.value.length,"/").concat(w.value,")")),m=e}catch(d){console.error("显示按钮失败:",d)}},de=function(){clearTimeout(ve),y&&(y.style.display="none"),m=null,be=null},ce=function(){return!!y&&y.matches(":hover")},se=function(e){x.value=x.value.filter((function(t){return t.idx!==e})),console.log("移除节点:",e),console.log("当前选择的节点列表:",x.value)},ue=function(){x.value=[]},fe=function(e){w.value=e,console.log("从组件更新最大选择节点数量为:",e)},pe=function(){y&&(y.addEventListener("mouseenter",(function(){console.log("鼠标进入加号按钮"),clearTimeout(ve)})),y.addEventListener("mouseleave",(function(){console.log("鼠标离开加号按钮"),de()})))},ve=null,be=null;return function(e,t){var n=k("el-button");return u(),f("div",Ce,[p("div",_e,[p("div",je,[C(Ne,{ref_key:"selectedNodesPanelRef",ref:r,style:{width:"20%","min-width":"300px","max-width":"600px"},selectedNodeList:x.value,maxSelectedNodes:w.value,currNode:S.value,onRemoveSelectedNode:se,onClearAllSelectedNodes:ue,onUpdateMaxNodes:fe,onHandleSelectedNodeClick:te,onHandleCurrNodePlusClick:ae},null,8,["selectedNodeList","maxSelectedNodes","currNode"]),p("div",Ae,[ze,p("div",{id:"plusButton",class:"plus-button",style:{display:"none"},onClick:ie},Oe),p("div",Te,[C(n,{style:{width:"120px"},color:"rgb(43, 124, 233)",type:"primary",onClick:t[0]||(t[0]=function(e){return t=D.value,D.value=!D.value,t=D.value?5:1,J(t),c=$(d),h.setOption({series:[{data:c.nodes,links:c.links}]}),void h.setOption({series:[{center:[0,0]}]});var t})},{default:_((function(){return[N(v(D.value?"Close All Nodes":"Show All Nodes"),1)]})),_:1})]),p("div",Ie,[C(n,{class:"center-view-btn",style:{width:"120px"},color:"rgb(43, 124, 233)",onClick:oe},{default:_((function(){return[N(" Center View")]})),_:1})])])])])])}}};n("default",w(Me,[["__scopeId","data-v-207365d2"]]))}}}))}();
