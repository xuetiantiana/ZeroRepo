!function(){function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,n)||t(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){if(e){if("string"==typeof e)return r(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}System.register([],(function(t,r){"use strict";return{execute:function(){t("g",(function n(t){if(!t.children||0===t.children.length)return 1;var r=t.children.map((function(e){return n(e)}));return 1+Math.max.apply(Math,e(r))}));t("h",(function(t,a){var i=0,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4?arguments[4]:void 0,u=r?"".concat(r,"/").concat(t):t;if(Array.isArray(e))return e.map((function(e){var n=a+1;return{name:e,feature_path:"".concat(u,"/").concat(e),idx:""+i++,level:n,level1Root:c}}));if("object"===o(e)&&null!==e){for(var f=[],s=function(){var e=n(m[h],2),t=e[0],r=e[1];if(Array.isArray(r))f.push({name:t,feature_path:"".concat(u,"/").concat(t),idx:""+i++,level:a,level1Root:c,children:r.map((function(e){var n=a+1;return{name:e,feature_path:"".concat(u,"/").concat(t,"/").concat(e),idx:""+i++,level:n,level1Root:c}}))});else if("object"===o(r)){var s=l(r,t,u,a+1,c);Array.isArray(s)?f.push({name:t,feature_path:"".concat(u,"/").concat(t),idx:""+i++,level:a,level1Root:c,children:s}):f.push({name:t,feature_path:"".concat(u,"/").concat(t),idx:""+i++,level:a,children:s.children||[]})}},h=0,m=Object.entries(e);h<m.length;h++)s();return f}return{name:e,feature_path:u}};if(t&&t.subtrees&&t.subtrees.length>0){var c=[],u=["Data Engineering","Algorithms","Advanced Modeling Techniques","Workflow"];e(t.subtrees).sort((function(e,n){var t=u.indexOf(e.name),r=u.indexOf(n.name);return-1===t&&-1===r?0:-1===t?1:-1===r?-1:t-r})).forEach((function(e,n){if(e.refactored_subtree){var t=e.name||"Subtree_".concat(n+1),r=l(e.refactored_subtree,t,"",2,t),o={name:t,feature_path:"".concat(t),idx:""+i++,level:1,children:r,level1Root:t};c.push(o)}}));var f={name:"root",feature_path:"root",idx:""+i++,level:0,children:c,visible:!0};return console.log("!!!!",c),console.log("数据转换完成:",f),console.log("处理了 ".concat(c.length," 个subtree组")),function(e){function n(e){if(e&&e.name){if(e.level>2&&5!=e.level){var t,r=e.name.replace(/\b(And|and)\b/g,"&").split(" "),o=3==e.level?10:8,a=!0;if(r.length<3&&r.every((function(e){return e.length<=o})))t=r.join("\n"),a=!1;else{var i=function(e,n){return e.includes("-")?e.split("-").map((function(e,t){return e.slice(0,n)})).join("-"):e.includes("&")?e.split("&").map((function(e,t){return e.slice(0,n)})).join("&"):e.slice(0,n)};if(r.length<=2){var l=3==e.level?4:3;t=r.map((function(e){return i(e,l)})).join("\n")}else t=r.map((function(e){return i(e,1)})).join("")}e.originalName=e.name,e.name=t,e.hasAbbr=a}e.children&&Array.isArray(e.children)&&e.children.forEach(n)}}n(e)}(f),r(f,a),console.log(f),f}return console.warn("数据格式不正确，使用默认数据"),t}));var r=function(e,n){if(e&&n){var t=function(e){e&&(r(e,n),e.children&&Array.isArray(e.children)&&e.children.forEach((function(e){return t(e)})))},r=function(e,n){if(e.feature_path){var t=n.metadata||n,r=e.level1Root||a(e.feature_path);if(t[r]){var i=t[r];if(Array.isArray(i)){var l=i.find((function(n){return"object"===o(n)&&null!==n&&n.feature_path===e.feature_path}));l?e.metaData=l:console.log("未找到节点 ".concat(e.name," 的匹配数据, feature_path: ").concat(e.feature_path))}else"object"===o(i)&&i[e.feature_path]&&(e.metaData=i[e.feature_path])}else console.log("未找到根键 ".concat(r," 在mapData中"))}else console.warn("节点缺少 feature_path:",e)},a=function(e){return e&&e.split("/").find((function(e){return e&&"root"!==e}))||""};return Array.isArray(e)?e.forEach((function(e){return t(e)})):t(e),console.log("节点数据匹配完成"),e}console.warn("treeData 或 mapData 为空")}}}}))}();
