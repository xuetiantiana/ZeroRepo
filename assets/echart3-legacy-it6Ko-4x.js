!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function n(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(t,n,o){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return l}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}System.register(["./util-legacy-Qg2MG4x8.js","./index-legacy-DgfHjSEG.js","./index-legacy-Ds2O1RuX.js"],(function(e,o){"use strict";var a,l,c,d,s,u,f,p,v,h,m,g,b,y,x,w,k,N,S,_,C,M,T,j,O,E;return{setters:[function(e){a=e.h,l=e.g},function(e){c=e.d,d=e.r,s=e.o,u=e.c,f=e.a,p=e.t,v=e.F,h=e.b,m=e.e,g=e.n,b=e.p,y=e.f,x=e._,w=e.g,k=e.h,N=e.i,S=e.j,_=e.w,C=e.k,M=e.l,T=e.m,j=e.q,O=e.s},function(e){E=e.i}],execute:function(){var o=document.createElement("style");o.textContent='@charset "UTF-8";.body .show[data-v-ae8090cc]{z-index:1000;opacity:1;pointer-events:auto}.body .info-item[data-v-ae8090cc]{margin-bottom:8px;overflow-wrap:break-word;word-wrap:break-word}.body .info-item .info-label[data-v-ae8090cc]{font-weight:700;color:#555}.body .info-item .info-value[data-v-ae8090cc]{margin-left:10px;color:#333}.body .info-docstring .docstring-content[data-v-ae8090cc]{cursor:pointer;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;transition:all .3s ease}.body .info-docstring.expanded .docstring-content[data-v-ae8090cc]{display:block;-webkit-line-clamp:unset;overflow:visible}.body .info-docstring.expanded .docstring-content[data-v-ae8090cc]:hover{color:#000}.sidebar[data-v-7d2975f5]{font-size:14px;height:100%;width:100%;background:#f8f9fa;border-right:2px solid #dee2e6;overflow:hidden;padding:0;box-sizing:border-box;display:flex;flex-direction:column}.sidebar .sidebar-header[data-v-7d2975f5]{display:flex;flex-direction:row;justify-content:space-between;padding:.8em 1em;border-bottom:4px solid #dee2e6}.sidebar .sidebar-content[data-v-7d2975f5]{flex:1;overflow:hidden;display:flex;flex-direction:column}.sidebar .sidebar-content .current-node-box[data-v-7d2975f5]{min-height:200px;padding:1em}.sidebar .sidebar-content .selected-nodes-box[data-v-7d2975f5]{padding:1em 0;flex:1;overflow:hidden}.sidebar .sidebar-content .selected-nodes-box>div[data-v-7d2975f5]{padding:0 1em;height:100%;overflow-y:auto}.select-node-item[data-v-7d2975f5]{width:100%;background:#fff;border:2px solid #ccc;border-radius:8px;box-shadow:0 4px 8px rgba(0,0,0,.3);transition:opacity .3s ease-in-out;margin-top:1em}.select-node-item[data-v-7d2975f5]:nth-child(1){margin-top:0}.select-node-item .show[data-v-7d2975f5]{z-index:1000;opacity:1;pointer-events:auto}.select-node-item .node-header[data-v-7d2975f5]{background:#f5f5f5;padding:15px;border-bottom:1px solid #ddd;border-radius:6px 6px 0 0;position:relative}.select-node-item .node-title[data-v-7d2975f5]{margin:0;font-weight:700;color:#333;font-size:1.1em;padding-right:1em}.select-node-item .close-btn[data-v-7d2975f5]{position:absolute;right:5px;top:10px;background:none;border:none;font-size:20px;cursor:pointer;color:#666;width:30px;height:30px;border-radius:15px}.select-node-item .close-btn[data-v-7d2975f5]:hover{background:#e0e0e0;color:#000}.select-node-item .node-body[data-v-7d2975f5]{padding:15px;max-height:200px;min-height:100px;overflow-y:auto}[data-v-7d2975f5] .el-radio-group{border-radius:20px;padding:3px 4px;background:#ccc;gap:5px;--el-font-size-base: 18px}[data-v-7d2975f5] .el-radio-group .el-radio-button__inner{border:0!important;border-radius:20px!important;color:#fff;background:transparent}[data-v-7d2975f5] .el-radio-group .is-active .el-radio-button__inner{background:#000!important;color:#fff!important;box-shadow:inset 0 0 0 1px #000!important}.header h3[data-v-ad2f2e1c]{margin:10px 0;text-align:center}.control-panel[data-v-ad2f2e1c]{display:flex;align-items:center;gap:20px;padding:10px 20px;background:#f8f9fa;border-radius:8px;margin:0 20px 10px;border:1px solid #e9ecef}.control-item[data-v-ad2f2e1c]{display:flex;align-items:center;gap:8px}.control-item label[data-v-ad2f2e1c]{font-size:14px;color:#333;font-weight:500}.max-nodes-input[data-v-ad2f2e1c]{width:60px;padding:4px 8px;border:1px solid #ddd;border-radius:4px;font-size:14px;text-align:center}.max-nodes-input[data-v-ad2f2e1c]:focus{outline:none;border-color:#409eff;box-shadow:0 0 0 2px rgba(64,158,255,.2)}.selection-status[data-v-ad2f2e1c]{font-size:14px;color:#666}.status-full[data-v-ad2f2e1c]{color:#f56c6c;font-weight:500}#viewport[data-v-ad2f2e1c]{width:100vw;height:100vh;overflow:hidden;position:relative}#wrapper[data-v-ad2f2e1c],#echart[data-v-ad2f2e1c]{width:100%;height:100%}.plus-button[data-v-ad2f2e1c]{position:absolute;width:20px;height:20px;background-color:#409eff;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:15px;font-weight:700;cursor:pointer;z-index:1000;box-shadow:0 2px 8px rgba(0,0,0,.3);transition:all .2s ease;user-select:none;transform:translate(-50%,-50%)}.plus-button span[data-v-ad2f2e1c]{line-height:1;transform:translateY(-1px)}.plus-button[data-v-ad2f2e1c]:hover{box-shadow:0 4px 12px rgba(0,0,0,.4)}.plus-button:hover[style*="background-color: rgb(64, 158, 255)"][data-v-ad2f2e1c]{background-color:#66b1ff!important}.plus-button:hover[style*="background-color: rgb(245, 108, 108)"][data-v-ad2f2e1c]{background-color:#f78989!important}.plus-button:hover[style*="background-color: rgb(144, 147, 153)"][data-v-ad2f2e1c]{background-color:#a6a9ad!important}#wrapper[data-v-ad2f2e1c]{position:relative}\n',document.head.appendChild(o);var I=function(e){return b("data-v-ae8090cc"),e=e(),y(),e},A={key:0,class:"body"},D={class:"info-item"},z=I((function(){return f("span",{class:"info-label"},"Node:",-1)})),P={class:"info-value"},B={class:"info-item"},F=I((function(){return f("span",{class:"info-label"},"Feature Path:",-1)})),L={class:"info-value"},R={key:0,class:"info-file_pat_"},q={class:"info-label"},U={class:"info-value"},W={key:0,style:{"margin-top":"0.5em"}},G=["onClick"],V={key:1},Y={key:2,style:{"margin-top":"0.5em"}},H=I((function(){return f("b",{style:{"margin-top":"0.5em"}},"methods: ",-1)})),X={key:0,class:"info-file_pat_"},Z={class:"info-label"},$={class:"info-value"},J={class:"info-label"},K=["onClick"],Q=x(c({__name:"nodeDetailComponent",props:{currNode:{type:Object,required:!0,default:function(){return{}}}},setup:function(e){var t=d(new Set),n=function(e){t.value.has(e)?t.value.delete(e):t.value.add(e)},o=function(e){return t.value.has(e)};return function(t,r){return e.currNode&&e.currNode.metaData?(s(),u("div",A,[f("div",D,[z,f("span",P,p(e.currNode.metaData.node),1)]),f("div",B,[F,f("span",L,p(e.currNode.metaData.feature_path),1)]),(s(!0),u(v,null,h(e.currNode.metaData.file_paths,(function(e,t){return s(),u("div",{key:t,class:"info-item"},[(s(!0),u(v,null,h(e,(function(e,t,n){return s(),u(v,{key:n},["extra"!==t?(s(),u("div",R,[f("span",q,p(t)+":",1),f("span",U,p(e),1)])):m("",!0)],64)})),128)),e.extra?(s(),u("div",W,[(s(!0),u(v,null,h(e.extra,(function(e,r,a){return s(),u(v,{key:a},["docstring"==r?(s(),u("div",{key:0,class:g(["info-docstring",{expanded:o("".concat(t,"-").concat(r))}])},[f("b",null,p(r)+": ",1),f("span",{class:"docstring-content",onClick:function(e){return n("".concat(t,"-").concat(r))}},p(e),9,G)],2)):"methods"!==r?(s(),u("p",V,[f("b",null,p(r)+": ",1),f("span",null,p(e),1)])):"methods"==r?(s(),u("div",Y,[H,(s(!0),u(v,null,h(e,(function(e,r){return s(),u("div",{key:r,style:{"margin-bottom":"0.5em"}},[(s(!0),u(v,null,h(e,(function(e,a,i){return s(),u(v,{key:i},["docstring"!==a?(s(),u("div",X,[f("span",Z,p(a)+":",1),f("span",$,p(e),1)])):"docstring"==a?(s(),u("div",{key:1,class:g(["info-docstring",{expanded:o("".concat(t,"-").concat(r,"-").concat(a))}])},[f("span",J,p(a)+":",1),f("span",{class:"docstring-content",onClick:function(e){return n("".concat(t,"-").concat(r,"-").concat(a))}},p(e),9,K)],2)):m("",!0)],64)})),128))])})),128))])):m("",!0)],64)})),128))])):m("",!0)])})),128))])):m("",!0)}}}),[["__scopeId","data-v-ae8090cc"]]),ee=function(e){return b("data-v-7d2975f5"),e=e(),y(),e},te={class:"sidebar"},ne=ee((function(){return f("div",{class:"sidebar-header"},[f("h2",null,"ZeroRepo")],-1)})),oe={class:"sidebar-content"},re={class:"current-node-box",ref:"nodeModalRef"},ae={class:"select-node-item",style:{border:"2px solid #2b7ce9","box-shadow":"0 8px 24px rgba(43, 124, 233, 0.4)"}},ie={class:"node-header"},le={class:"node-title",style:{"padding-right":"0"}},ce=ee((function(){return f("span",{style:{color:"#2b7ce9"}},"CurrNode:  ",-1)})),de={class:"node-body"},se={style:{padding:"1em 1em 0","border-top":"1px solid #aaa","margin-top":"1em"}},ue={style:{margin:"0 0 1em"}},fe={class:"selected-nodes-box"},pe=["onClick"],ve={class:"node-body"},he=x(c({__name:"SelectedNodesPanel",props:{selectedNodeList:{type:Array,required:!0,default:[]},currNode:{type:Object,required:!0,default:function(){return{}}},maxSelectedNodes:{type:Number,required:!0,default:0}},emits:["removeSelectedNode"],setup:function(e,t){var n=t.emit,o=e,r=n,a=d(""),i=d(null),l=d({});function c(e){null!=e&&C((function(){var t=l.value[e];t&&i.value&&t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}))}return function(t,n){var d=w("el-option"),g=w("el-select");return s(),u("div",null,[f("div",te,[ne,f("div",oe,[f("div",re,[f("div",ae,[f("div",ie,[f("h3",le,[ce,k(" "+p(e.currNode&&e.currNode.metaData?e.currNode.originalName?e.currNode.originalName+" ("+e.currNode.name+")":e.currNode.metaData.node:"节点信息"),1)])]),f("div",de,[e.currNode&&e.currNode.metaData?(s(),N(Q,{key:0,currNode:e.currNode},null,8,["currNode"])):m("",!0)])])],512),f("div",se,[f("h4",ue," Added Nodes ("+p(e.selectedNodeList.length)+") ",1),S(g,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return a.value=e}),filterable:"",placeholder:"Type to search yours added nodes below...",clearable:"",style:{width:"100%"},onChange:c},{default:_((function(){return[(s(!0),u(v,null,h(e.selectedNodeList,(function(e,t){var n;return s(),N(d,{key:e.id,label:(null===(n=e.metaData)||void 0===n?void 0:n.node)||e.label,value:t},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]),f("div",fe,[f("div",{ref_key:"selectedNodesScrollContainer",ref:i,class:"selected-nodes-list"},[(s(!0),u(v,null,h(e.selectedNodeList,(function(e,t){return s(),u("div",{key:t,ref_for:!0,ref:function(e){return function(e,t){e&&(l.value[t]=e)}(e,t)},class:"select-node-item"},[f("div",{class:"node-header",style:M({"border-left":"4px solid ".concat(e.selectedColor)})},[f("h3",{class:"node-title",style:M({color:e.selectedColor})},p(e.originalName?e.originalName+" ("+e.name+")":e.metaData.node),5),f("button",{class:"close-btn",onClick:function(t){return n=e.feature_path,console.log(o.selectedNodeList),void r("removeSelectedNode",n);var n}}," × ",8,pe)],4),f("div",ve,[e&&e.metaData?(s(),N(Q,{key:0,currNode:e},null,8,["currNode"])):m("",!0)])])})),128))],512)])])])])}}}),[["__scopeId","data-v-7d2975f5"]]),me=function(e){return b("data-v-ad2f2e1c"),e=e(),y(),e},ge={class:""},be={style:{height:"100vh"}},ye={id:"viewport",style:{display:"flex"}},xe={id:"wrapper",style:{flex:"1",overflow:"hidden",height:"100%"}},we=me((function(){return f("div",{id:"echart",style:{width:"100%",height:"100%"}},null,-1)})),ke=[me((function(){return f("span",{class:"icon"},"+",-1)}))],Ne={class:"showAllNodes",style:{position:"absolute",right:"20px",top:"5px"}},Se={style:{position:"absolute",right:"150px",top:"5px"}},_e={__name:"echart3",setup:function(e){var o=null,c={nodes:[],links:[]},v=1,h=null,m=!1,g=null,b=null,y=d([]),x=d(1e6),N=d(),C=0,M=0,I=[];T(x,(function(e,t){if(console.log("最大选择数量从 ".concat(t," 变更为 ").concat(e)),y.value.length>e){var n=y.value.slice(e);y.value=y.value.slice(0,e),console.log("由于限制变更，移除了以下节点:",n),alert("由于限制变更，已移除 ".concat(n.length," 个节点"))}}));var A=1e3,D=1e3;j((function(){A=document.getElementById("echart").getBoundingClientRect().width,D=document.getElementById("echart").getBoundingClientRect().height;var e=Math.min(A,D);v=Math.max(2500/e,1),b=document.getElementById("plusButton"),le(),console.log("屏幕尺寸：",A,D,2500/e,v);var t=document.getElementById("echart");t&&(h=E(t),Promise.all([fetch("./data/webui.json").then((function(e){return e.json()})),fetch("./data/map.json").then((function(e){return e.json()}))]).then((function(e){var t=i(e,2),n=t[0],r=t[1];console.log("webui:",n),console.log("map:",r),B(n.data_flow_graph);var l=a(n,r);o=l,$(1),c=Z(o),J(h)})).catch((function(e){console.error("请求失败:",e)})),O((function(){h.dispose()})))}));var z=d(!1),P=[],B=function(e){e.forEach((function(e){var t=e.from,n=e.to;if(t&&n){var o={source:"1_"+t,target:"1_"+n,type:"rootLink",content:e,label:{show:!0,formatter:e.data_type||e.label||"",color:"#000",fontSize:9,position:"middle"},lineStyle:{color:"#000",width:1,type:"dashed",opacity:1},symbol:["circle","arrow"],symbolSize:[4,8]};P.push(o)}})),console.log(P)};var F,L,R=(L=[{name:"test1",x:F=680,y:F},{name:"test2",x:-F,y:-F},{name:"test3",x:-F,y:F},{name:"test4",x:F,y:-F}],console.log("Dddd"),L.map((function(e){return r(r({},e),{},{id:e.name,itemStyle:{opacity:0},label:{show:!1}})}))),q=["#686759","#0068B8","#62BDE4","#52E0FC","#86DCF8","#BAD7F3"],U={"Advanced Modeling Techniques":"#FF8364",Algorithms:"#5414E9",Workflow:"#00C6A2","Data Engineering":"#0368FF"},W=function(e){return 0==e?5:1==e?100/v:2==e?80/v:3==e?70/v:4==e?38/v:30/v},G=function(e,t){if(console.log("!!@@@@",t,N.value),e<=1)return{color:q[e%q.length],borderColor:q[e%q.length],borderWidth:.5,opacity:1};var n=!1;return N.value&&N.value.id2==t.id&&(n=!0),{color:q[e%q.length],borderColor:q[e%q.length],borderWidth:.5,shadowColor:n?"rgb(43, 124, 233)":"transparent",shadowBlur:20}},V=function(e,t){return{color:1==e?"rgba(0,0,0,.1)":U[t.level1Root]||"rgba(0,0,0,.4)",width:1}},Y=function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>4?arguments[4]:void 0;if(e>=5){var o=180*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)/Math.PI,r=X(0,0,(null==n?void 0:n.x)+0,(null==n?void 0:n.y)+0,100,t),a=W(5);return{show:!0,position:[r.dx+a,r.dy+a],fontSize:10,color:"#333",fontWeight:"normal",align:"center",verticalAlign:"middle",rotate:o>90&&o<270?180-o:-o}}return 0==e?{fontSize:12,color:"#333",fontWeight:"normal"}:{position:"inside",fontSize:1===e?12:11,color:1==e?"#fff":"#333",verticalAlign:"middle",align:"center",fontWeight:1===e?"bold":"normal",width:200}};function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Arial",o=(H._canvas||(H._canvas=document.createElement("canvas"))).getContext("2d");return o.font="".concat(t,"px ").concat(n),o.measureText(e).width}var X=function(e,t,n,o){var r,a=arguments.length>5?arguments[5]:void 0;a.length,r=H(a)/2+25;var i=n-e,l=o-t,c=Math.atan2(l,i),d=c*(180/Math.PI);return{dx:Math.cos(c)*r,dy:Math.sin(c)*r,angleDeg:d}},Z=function(e){var t=function e(t){if(!t||!1===t.visible)return null;var n=r({},t);return n.children&&Array.isArray(n.children)&&(n.children=n.children.map(e).filter((function(e){return!!e}))),n}(e);console.log("开始转换为 Graph 数据格式 treeData",t),I=t;var o=[],a=[],i=new Map;function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;function n(e){return e<=1?1:1==e?.75:2==e?.5:3==e?.3:4==e?.25:.08}if(!e.children||0===e.children.length)return n(t);var o=e.children.reduce((function(e,n){return e+c(n,t+1)}),0),r=n(t);return Math.max(o,r)}!function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;if(t&&t.name&&!1!==t.visible){var s,u=r<=1?r+"_"+(t.feature_path||t.name):r+"_"+t.id+"_"+(t.feature_path||t.name),f=function(e){return{0:0,1:125,2:215,3:310,4:400,5:500}[e]||420+40*(e-6)}(r),p=0,v=0;0===r?(p=0,v=0,s=0):(s=(l+d)/2,p=Math.cos(s)*f,v=Math.sin(s)*f);var h={id:u,id2:t.id,name:t.name||"Unknown",originalName:t.originalName?t.originalName:null,feature_path:t.feature_path||"",level:r,metaData:t.metaData,x:p,y:v,angle:s,sectorStart:l,sectorEnd:d,fixed:!0,symbolSize:t.symbolSize||W(r),label:Y(r,s,t.name||"",f,{x:p,y:v}),itemStyle:t.itemStyle||G(r,t),category:r};if(0!=r&&o.push(h),i.set(t.name,u),n&&r>=2&&a.push({source:n,target:u,lineStyle:t.lineStyle||V(r,t)}),t.children&&t.children.length>0){var m=t.children.map((function(e){return c(e,r+1)})),g=m.reduce((function(e,t){return e+t}),0),b=d-l;0===r&&(b=2*Math.PI);var y=l;t.children.forEach((function(t,n){var o=m[n]/g*b,a=y+o;e(t,u,r+1,y,a),y=a}))}}}(t,null,0,0,2*Math.PI),console.log("Graph 节点布局完成，节点数量:",o.length,o,a),l(t)<=2?P.forEach((function(e){e.label.show=!0})):P.forEach((function(e){e.label.show=!1}));var d=[].concat(P,a);return console.log("!!!linksResult",d),{nodes:[].concat(n(R),o),links:d}},$=function(e){o&&function t(n,o){n.visible=o<=e,n.children&&n.children.length>0&&n.children.forEach((function(e){return t(e,o+1)}))}(o,0)},J=function(e){if(c&&c.nodes&&0!==c.nodes.length){console.log("初始化 Graph 图表，节点数量:",c.nodes.length);var n={tooltip:{trigger:"item",triggerOn:"mousemove",extraCssText:"max-width: 400px; white-space: normal;",formatter:function(e){if("node"===e.dataType){var t=e.data,n="<strong>Node: </strong>".concat(t.originalName?t.originalName+" ("+t.name+")":t.name," <br/>");return t.feature_path&&(n+="<strong>Feature Path: </strong> ".concat(t.feature_path,"<br/>")),n}if("edge"===e.dataType&&e.data&&"rootLink"===e.data.type){var o="<strong>Flow Graph:</strong><br/>";return o+="<strong>From: </strong> ".concat(e.data.content.from,"<br/>"),o+="<strong>To: </strong> ".concat(e.data.content.to,"<br/>"),e.data.label&&e.data.label.formatter&&(o+="<strong>Data Type: </strong> ".concat(e.data.content.data_type,"<br/>")),o}return"edge"===e.dataType?"":e.name||""}},series:[{type:"graph",layout:"none",roam:"move",zoom:v,center:[0,0],data:c.nodes,links:c.links,symbol:"circle",symbolSize:30,label:{show:!0,position:function(e){return e&&e.data&&e.data.level>=5?"right":"inside"},fontSize:function(e){return e&&e.data&&e.data.level>=5?10:12},formatter:function(e){var t=e.name||"";if(e&&e.data&&e.data.level>=3)return t;for(var n=t.split(" "),o=[],r=0;r<n.length;r++){var a=n[r];o.push(a)}return o.join("\n")}},lineStyle:{color:"source",curveness:0,width:1},animationDurationUpdate:750,animationEasingUpdate:"quinticInOut"}]};e.setOption(n),e.on("mouseover",(function(e){if("series"===e.componentType&&"node"===e.dataType&&e.data.level>1){var t=e.data.feature_path;if(clearTimeout(ce),de===t)return;de=t,ne(e.data)}})),e.on("mouseout",(function(e){if("series"===e.componentType&&"node"===e.dataType&&e.data.level>1){var t=e.data.feature_path;if(de!==t)return;clearTimeout(ce),ce=setTimeout((function(){de!==t||re()||(oe(),de=null)}),200)}})),setTimeout((function(){var t=i(e.getModel().getSeriesByIndex(0).coordinateSystem.getRoamTransform(),6);C=t[4],M=t[5],console.log("初始偏移量:",{initialTranslateX:C,initialTranslateY:M})}),100),e.on("graphRoam",(function(){m=!0,oe(),setTimeout((function(){m=!1,console.log("拖拽/缩放结束")}),300),K()})),e.on("mousedown",(function(){console.log("mousedown"),m=!0,oe()})),e.on("mouseup",(function(){console.log("mouseup"),setTimeout((function(){m=!1,console.log("鼠标操作结束")}),100)})),e.on("click",(function(n){"node"===n.dataType&&(console.log("params.data",n.data),n.data.level>1?N.value=n.data:N.value=null,function(e){var n=function e(n,o){if(n.feature_path===o)return n;if(n.children){var r,a=t(n.children);try{for(a.s();!(r=a.n()).done;){var i=e(r.value,o);if(i)return i}}catch(l){a.e(l)}finally{a.f()}}return null}(o,e),r=!1;if(n&&n.children){var a,i=t(n.children);try{for(i.s();!(a=i.n()).done;)if(!1===a.value.visible){r=!0;break}}catch(l){i.e(l)}finally{i.f()}n.children.forEach((function(e){if(e.visible=!e.visible,!e.visible&&e.children){var t=function(e){e.visible=!1,e.children&&e.children.forEach(t)};t(e)}}))}}(n.data.feature_path),c=Z(o),e.setOption({series:[{data:c.nodes,links:c.links}]}),ee(n.data))}))}else console.error("Graph 数据不存在或为空:",c)},K=function(){var e=l(I);console.log("depth",e);var t=i(h.getModel().getSeriesByIndex(0).coordinateSystem.getRoamTransform(),6),n=t[4],o=t[5],r=300*(e-1),a=Math.min((r-A)/2+A,r),c=Math.min((r-D)/2+D,r),d=n,s=o;console.log(A,D),Math.abs(n-C)>a&&(d=n>C?C+a:C-a),Math.abs(o-M)>c&&(s=o>M?M+c:M-c),console.log("&&",n,o),console.log("x移动了多少",Math.abs(n-C),"最多可拖拽",a),console.log("y移动了多少",Math.abs(o-M),"最多可拖拽",c),d===n&&s===o||(Q(),console.log("aaa",d-n,s-o))},Q=function(){h.setOption({series:[{center:[0,0]}]}),setTimeout((function(){h.setOption({series:[{data:c.nodes}]})}),100)};function ee(e){if(h&&e){console.log("@@@",e);var t=h.convertToPixel({seriesIndex:0},[e.x,e.y]),n=h.getDom(),o=n.offsetWidth,r=n.offsetHeight,a=h.getModel().getSeriesByIndex(0).option.zoom,l=80*a,c=i(t,2),d=c[0],s=c[1],u=!1;if((d<l||d>o-l||s<l||s>r-l)&&(u=!0),u){console.log("needMove");var f=e.x,p=e.y,v=Math.sqrt(f*f+p*p);if(0===v)return;var m=Math.max(0,v-200/a)/v,g=f*m,b=p*m;h.setOption({series:[{center:[g,b]}]})}}}var te=function(){if(!(g&&g.level<=1)&&g){var e=g.feature_path;if(y.value.some((function(t){return t.feature_path===e})))console.log("点击减号，移除节点:",g),y.value=y.value.filter((function(t){return t.feature_path!==e}));else{if(y.value.length>=x.value)return void alert("最多只能选择 ".concat(x.value," 个节点！"));console.log("点击加号，添加节点:",g),y.value.unshift(g),console.log("!!!!",y)}console.log("当前选择的节点列表:",y.value),ne(g)}},ne=function(e){if(b&&!m)try{var t=y.value.some((function(t){return t.feature_path===e.feature_path})),n=h.convertToPixel("series",[e.x,e.y]),o=e.symbolSize||30;console.log(n);var r=h.getModel().getSeriesByIndex(0).coordinateSystem.getRoamTransform(),a=1;Array.isArray(r)&&6===r.length?a=r[0]:r&&"number"==typeof r.zoom&&(a=r.zoom);var i=o/2*a*Math.sin(Math.PI/4),l=-o/2*a*Math.sin(Math.PI/4);b.style.left=n[0]+i+"px",b.style.top=n[1]+l+"px",b.style.display="flex",t?(b.getElementsByClassName("icon")[0].textContent="−",b.style.backgroundColor="#f56c6c",b.title="点击取消选择"):y.value.length>=x.value?(b.getElementsByClassName("icon")[0].textContent="+",b.style.backgroundColor="#909399",b.title="已达到最大选择数量 (".concat(y.value.length,"/").concat(x.value,")")):(b.getElementsByClassName("icon")[0].textContent="+",b.style.backgroundColor="#409eff",b.title="点击选择节点 (".concat(y.value.length,"/").concat(x.value,")")),g=e}catch(c){console.error("显示按钮失败:",c)}},oe=function(){clearTimeout(ce),b&&(b.style.display="none"),g=null,de=null},re=function(){return!!b&&b.matches(":hover")},ae=function(e){y.value=y.value.filter((function(t){return t.feature_path!==e})),console.log("移除节点:",e),console.log("当前选择的节点列表:",y.value)},ie=function(e){x.value=e,console.log("从组件更新最大选择节点数量为:",e)},le=function(){b&&(b.addEventListener("mouseenter",(function(){console.log("鼠标进入加号按钮"),clearTimeout(ce)})),b.addEventListener("mouseleave",(function(){console.log("鼠标离开加号按钮"),oe()})))},ce=null,de=null;return function(e,t){var n=w("el-button");return s(),u("div",ge,[f("div",be,[f("div",ye,[S(he,{style:{width:"20%","min-width":"300px","max-width":"600px"},selectedNodeList:y.value,maxSelectedNodes:x.value,currNode:N.value,onRemoveSelectedNode:ae,onUpdateMaxNodes:ie},null,8,["selectedNodeList","maxSelectedNodes","currNode"]),f("div",xe,[we,f("div",{id:"plusButton",class:"plus-button",style:{display:"none"},onClick:te},ke),f("div",Ne,[S(n,{style:{width:"120px"},color:"rgb(43, 124, 233)",type:"primary",onClick:t[0]||(t[0]=function(e){return t=z.value,z.value=!z.value,t=z.value?5:1,$(t),c=Z(o),h.setOption({series:[{data:c.nodes,links:c.links}]}),void h.setOption({series:[{center:[0,0]}]});var t})},{default:_((function(){return[k(p(z.value?"Close All Nodes":"Show All Nodes"),1)]})),_:1})]),f("div",Se,[S(n,{style:{width:"120px"},color:"rgb(43, 124, 233)",type:"primary",onClick:Q},{default:_((function(){return[k(" Center View")]})),_:1})])])])])])}}};e("default",x(_e,[["__scopeId","data-v-ad2f2e1c"]]))}}}))}();
