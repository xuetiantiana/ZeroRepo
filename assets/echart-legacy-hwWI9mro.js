!function(){function t(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function e(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?t(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(t,e,o){return(e=function(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var a=o.call(t,e||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}System.register(["./index-legacy-Ds2O1RuX.js","./index-legacy-DAmdit6M.js"],(function(t,a){"use strict";var n,i,c,l,d,u;return{setters:[function(t){n=t.i},function(t){i=t.q,c=t.s,l=t.o,d=t.c,u=t.a}],execute:function(){var a={class:""},s=[u("div",{class:"header"},[u("h3",null,"echart"),u("div",{id:"main",style:{width:"100vw",height:"100vh"}})],-1)];t("default",{__name:"echart",setup:function(t){var u=1,f={},b=[],h=[],m={},g={},p=new Set,y=[],v=[],w=null;function S(t){function o(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",l=function(){if(t.hasOwnProperty(d)){var l=u+++"",s=d;f[s]=l;var p=n?"".concat(n,"/").concat(d):d;e&&(m[e]||(m[e]=[]),m[e].push(l),g[l]=e);var y={border:"#B0C4DE",background:"#F0F8FF",highlight:{border:"#4682B4",background:"#ADD8E6"}};if(Array.isArray(t[d])){y={border:"#D3D3D3",background:"#F5F5F5",highlight:{border:"#A9A9A9",background:"#E0E0E0"}};var v={id:l,label:s,name:s,originalLabel:s,title:"".concat(p),path:p,shape:"box",color:y,font:{size:14,bold:!0},level:a,widthConstraint:{minimum:101,maximum:101},isArrayContainer:!0,rootId:i,rootLabel:c,category:c};if(b.push(v),e){var w={source:e,target:l};h.push(w)}t[d].forEach((function(t,e){var o=u+++"",r="string"==typeof t?t:"Item ".concat(e+1),n="".concat(p,"/").concat(r);m[l]||(m[l]=[]),m[l].push(o),g[o]=l;var d={id:o,label:r,name:r,title:"".concat(n),path:n,shape:"box",color:{border:"#FFD700",background:"#FFFACD",highlight:{border:"#DAA520",background:"#FFFFE0"}},font:{size:14,bold:!0},level:a+1,heightConstraint:{minimum:20},widthConstraint:{minimum:101,maximum:101},rootId:i,rootLabel:c,category:c};b.push(d);var s={source:l,target:o};h.push(s)}))}else if("object"===r(t[d])&&null!==t[d]){y={border:"#D3D3D3",background:"#F5F5F5",highlight:{border:"#A9A9A9",background:"#E0E0E0"}};var S={id:l,label:s,name:s,title:"".concat(p),path:p,shape:"box",color:y,font:{size:14,bold:!0},level:a,widthConstraint:{minimum:101,maximum:101},rootId:i,rootLabel:c,category:c};if(Object.keys(t[d]).length>0&&(S.originalLabel=s),b.push(S),e){var E={source:e,target:l};h.push(E)}o(t[d],l,a+1,s,p,i,c)}}};for(var d in t)l()}t.subtrees&&Array.isArray(t.subtrees)&&t.subtrees.forEach((function(t,e){var r=u+++"",a=t.name||"Unnamed Subtree",n={id:r,label:a,name:a,symbolSize:80,originalLabel:a,title:"".concat(a),file_path:t.file_path||"N/A",shape:"box",color:{border:"#6495ED",background:"#E6E6FA",highlight:{border:"#4149E1",background:"#D8BFD8"}},font:{size:16,bold:!0,color:"#000"},margin:10,widthConstraint:{minimum:150,maximum:150},heightConstraint:{minimum:20,maximum:20},level:0,hidden:!1,sortOrder:e,rootId:r,rootLabel:a,category:a,showIcon:!0,iconType:"root"};b.push(n),f[a]=r,t.refactored_subtree&&o(t.refactored_subtree,r,1,a,a,r,a)})),t.data_flow_graph&&Array.isArray(t.data_flow_graph)&&(console.log("？？？",f),t.data_flow_graph.forEach((function(t){var e=f[t.from],o=f[t.to];if(e&&o){var r={source:e,target:o,type:"rootLink",label:{show:!0,formatter:t.data_type||t.label||""},name:t.data_id||"",data_id:t.data_id||"",transformation:t.transformation||"",lineStyle:{color:"red",width:3,opacity:.9,type:"dashed"},emphasis:{lineStyle:{color:"#c0392b",width:6,opacity:1,shadowColor:"#c0392b",shadowBlur:15}}};h.push(r)}else console.warn("Could not create edge for flow:",t,"due to missing node IDs.")}))),console.log("数据处理完成",b,h,m,g,f),y=[],v=[],b.forEach((function(t){0===t.level&&y.push(e(e({},t),{},{label:{show:!0,formatter:function(t){var e=m[t.data.id]&&m[t.data.id].length>0,o=p.has(t.data.id);return"".concat(e?o?"▼":"▶":""," ").concat(t.data.name)}}}))})),h.forEach((function(t){"rootLink"===t.type&&v.push(t)}))}function E(t){m[t]&&m[t].length>0&&(p.has(t)?(O(t),p.delete(t)):(!function(t){var o=m[t]||[];o.forEach((function(o){var r=b.find((function(t){return t.id===o}));r&&!y.find((function(t){return t.id===o}))&&y.push(e(e({},r),{},{label:{show:!0,formatter:function(t){var e=m[t.data.id]&&m[t.data.id].length>0,o=p.has(t.data.id);return"".concat(e?o?"▼":"▶":""," ").concat(t.data.name)}}}));var a=h.find((function(e){return e.source===t&&e.target===o}));a&&!v.find((function(e){return e.source===t&&e.target===o}))&&v.push(a)}))}(t),p.add(t)),function(){if(!w)return;w.setOption({series:[{roam:!0,data:y,edges:v}]})}())}function O(t){(m[t]||[]).forEach((function(e){p.has(e)&&(O(e),p.delete(e)),y=y.filter((function(t){return t.id!==e})),v=v.filter((function(o){return!(o.source===t&&o.target===e||o.source===e||o.target===e)}))}))}i((function(){var t=document.getElementById("main");if(t){var e=n(t);fetch("./data/webui.json").then((function(t){return t.json()})).then((function(t){S(t),D(e)})),c((function(){e.dispose()}))}}));var A=[{name:"Algorithms"},{name:"Workflow"},{name:"Data Engineering"},{name:"Advanced Modeling Techniques"}],D=function(t){var e;w=t;var r={tooltip:{trigger:"item",formatter:function(t){return"edge"===t.dataType?"rootLink"===t.data.type?"🔗 数据流连接<br/>"+"从：".concat(t.data.source,"<br/>")+"到：".concat(t.data.target,"<br/>")+"数据类型：".concat(t.data.label||"无","<br/>")+"数据ID：".concat(t.data.data_id||"无","<br/>")+"转换说明：".concat(t.data.transformation?t.data.transformation.substring(0,50)+"...":"无"):"🔗 从 ".concat(t.data.source," 到 ").concat(t.data.target,"<br/>名称：").concat(t.data.name||"无"):"node"===t.dataType?"节点：".concat(t.data.name,"<br/>path：").concat(t.data.path||"无","<br/>id：").concat(t.data.id):void 0}},legend:[{data:A.map((function(t){return t.name}))}],series:[(e={type:"graph",roam:!0,layout:"force",animation:!1,symbolSize:50},o(o(o(o(o(o(o(o(o(o(e,"animation",!1),"data",b),"force",{initLayout:"circular",gravity:.5,repulsion:500,edgeLength:150,layoutAnimation:!0}),"lineStyle",{color:"#999",width:1,opacity:.5,curveness:.1}),"edgeSymbol",["none","arrow"]),"edgeSymbolSize",[4,8]),"edges",h),"edgeLabel",{show:!1,position:"middle",fontSize:10,color:"#666",backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:3,padding:[2,4],formatter:function(t){return t.data.label&&t.data.label.formatter?t.data.label.formatter:""}}),"categories",A),"label",{show:!0,position:"inside",fontSize:10,color:"#333",formatter:function(t){return t.data.label&&t.data.label.formatter?t.data.label.formatter(t):t.data.name||t.data.label}}),o(o(e,"emphasis",{focus:"adjacency",lineStyle:{color:"#999",opacity:1,shadowColor:"#ff4757",shadowBlur:10},itemStyle:{borderColor:"#ff4757",borderWidth:3,shadowColor:"#ff4757",shadowBlur:10},label:{color:"#ff4757",fontWeight:"bold",fontSize:12},edgeLabel:{show:!0,color:"red",fontSize:12,backgroundColor:"rgba(255, 71, 87, 0.1)",padding:[3,6]},blurScope:"none"}),"blur",{lineStyle:{opacity:.2},itemStyle:{opacity:1},label:{opacity:1}}))]};console.log("setsss",v,y),t.setOption(r),t.on("click",(function(t){"node"===t.dataType&&E(t.data.id)}))};return function(t,e){return l(),d("div",a,s)}}})}}}))}();
