!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(t=a.call(r)).done)&&(l.push(t.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,n)||r(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=Array(n);r<n;r++)t[r]=e[r];return t}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}System.register([],(function(r,t){"use strict";return{execute:function(){r("g",(function n(r){if(!r.children||0===r.children.length)return 1;var t=r.children.map((function(e){return n(e)}));return 1+Math.max.apply(Math,e(t))}));r("h",(function(r,a){var i=0,l=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4?arguments[4]:void 0,u=t?"".concat(t,"/").concat(r):r;if(Array.isArray(e))return e.map((function(e){var n=a+1;return{name:e,feature_path:"".concat(u,"/").concat(e),id:i++,level:n,level1Root:c}}));if("object"===o(e)&&null!==e){for(var f=[],s=function(){var e=n(m[h],2),r=e[0],t=e[1];if(Array.isArray(t))f.push({name:r,feature_path:"".concat(u,"/").concat(r),id:i++,level:a,level1Root:c,children:t.map((function(e){var n=a+1;return{name:e,feature_path:"".concat(u,"/").concat(r,"/").concat(e),id:i++,level:n,level1Root:c}}))});else if("object"===o(t)){var s=l(t,r,u,a+1,c);Array.isArray(s)?f.push({name:r,feature_path:"".concat(u,"/").concat(r),id:i++,level:a,level1Root:c,children:s}):f.push({name:r,feature_path:"".concat(u,"/").concat(r),id:i++,level:a,children:s.children||[]})}},h=0,m=Object.entries(e);h<m.length;h++)s();return f}return{name:e,feature_path:u}};if(r&&r.subtrees&&r.subtrees.length>0){var c=[],u=["Data Engineering","Algorithms","Advanced Modeling Techniques","Workflow"];e(r.subtrees).sort((function(e,n){var r=u.indexOf(e.name),t=u.indexOf(n.name);return-1===r&&-1===t?0:-1===r?1:-1===t?-1:r-t})).forEach((function(e,n){if(e.refactored_subtree){var r=e.name||"Subtree_".concat(n+1),t=l(e.refactored_subtree,r,"",2,r),o={name:r,feature_path:"".concat(r),id:i++,level:1,children:t,level1Root:r};c.push(o)}}));var f={name:"root",feature_path:"root",id:i++,level:0,children:c,visible:!0};return console.log("!!!!",c),console.log("数据转换完成:",f),console.log("处理了 ".concat(c.length," 个subtree组")),function(e){function n(e){if(e&&e.name){if(e.level>2&&5!=e.level){var r,t=e.name.replace(/\b(And|and)\b/g,"&").split(" "),o=3==e.level?10:8;if(t.length<3&&t.every((function(e){return e.length<=o})))r=t.join("\n");else{var a=function(e,n){return e.includes("-")?e.split("-").map((function(e,r){return e.slice(0,n)})).join("-"):e.includes("&")?e.split("&").map((function(e,r){return e.slice(0,n)})).join("&"):e.slice(0,n)};if(t.length<=2){var i=3==e.level?4:3;r=t.map((function(e){return a(e,i)})).join("\n")}else r=t.map((function(e){return a(e,1)})).join("")}e.originalName=e.name,e.name=r}e.children&&Array.isArray(e.children)&&e.children.forEach(n)}}n(e)}(f),t(f,a),console.log(f),f}return console.warn("数据格式不正确，使用默认数据"),r}));var t=function(e,n){if(e&&n){var r=function(e){e&&(t(e,n),e.children&&Array.isArray(e.children)&&e.children.forEach((function(e){return r(e)})))},t=function(e,n){if(e.feature_path){var r=n.metadata||n,t=e.level1Root||a(e.feature_path);if(r[t]){var i=r[t];if(Array.isArray(i)){var l=i.find((function(n){if("object"===o(n)&&null!==n){var r=n.feature_path===e.feature_path,t=n.node===e.name;return r||t}return!1}));l?e.metaData=l:console.log("未找到节点 ".concat(e.name," 的匹配数据, feature_path: ").concat(e.feature_path))}else"object"===o(i)&&i[e.feature_path]&&(e.metaData=i[e.feature_path])}else console.log("未找到根键 ".concat(t," 在mapData中"))}else console.warn("节点缺少 feature_path:",e)},a=function(e){return e&&e.split("/").find((function(e){return e&&"root"!==e}))||""};return Array.isArray(e)?e.forEach((function(e){return r(e)})):r(e),console.log("节点数据匹配完成"),e}console.warn("treeData 或 mapData 为空")}}}}))}();
